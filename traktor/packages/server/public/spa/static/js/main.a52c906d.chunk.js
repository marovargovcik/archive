(this["webpackJsonptraktor-monorepo-spa"]=this["webpackJsonptraktor-monorepo-spa"]||[]).push([[0],{184:function(e,t,n){},318:function(e,t,n){"use strict";n.r(t);var a=n(1),r=(n(184),n(0)),c=n.n(r),i=n(23),s=n.n(i),o=n(393),u=n(11),l=n(16),d=n(19),j=n(365),p=n(400),b=n(395),m=n(58),h=n(370),f=n(358),O=n(9),g=n(88),v=Object(g.a)((function(e){return e.notifications}),(function(e){return e})),x=n(6);function y(e){return e.type.endsWith("/rejected")}var w=Object(x.c)({extraReducers:function(e){e.addMatcher(y,(function(e,t){e[t.meta.requestId]=t.payload}))},initialState:{},name:"notifications",reducers:{createNotification:{prepare:function(e){return{payload:{id:Object(x.d)(),message:e}}},reducer:function(e,t){e[t.payload.id]=t.payload.message}},removeNotification:function(e,t){delete e[t.payload]}}}),P=w.actions,k=w.reducer,S=P.createNotification,I=P.removeNotification,C=k;var N=function(e){var t=e.id,n=e.message,r=Object(u.b)();return Object(a.jsx)(b.a,{bgcolor:"secondary.main",borderBottom:1,borderColor:"divider",color:"secondary.contrastText",onClick:function(){r(I(t))},px:2,py:1,style:{cursor:"pointer"},textAlign:"center",children:n})};var R,W=function(){var e=Object(u.c)(v);return Object(a.jsx)(b.a,{position:"fixed",width:"calc(100% - 256px)",zIndex:1,children:Object.entries(e).map((function(e){var t=Object(O.a)(e,2),n=t[0],r=t[1];return Object(a.jsx)(N,{id:n,message:r},n)}))})},z=n(350),L=Object(z.a)({drawerPaper:{width:256}}),F=n(14),T=n(321),V=n(361),E=n(15),M=n(399),A=n(351),B=n(354),D=n(355),_=n(356),q=n(357),G=n(359),U=n(360),J=n(397),K=n(353),H=n(5),Y=n.n(H),Q=n(7),X=n(12),Z=n(10),$=n.n(Z),ee=Object(x.b)("actions/lists/add",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,$.a.post("/trakt/users/".concat(nt(),"/lists"),t);case 4:return r=e.sent,e.abrupt("return",r.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.toString()));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),te=Object(x.b)("actions/lists/remove",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,$.a.delete("/trakt/users/".concat(nt(),"/lists/").concat(t));case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",a(e.t0.toString()));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()),ne=Object(x.b)("actions/lists/update",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i,s,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.description,r=t.name,c=t.privacy,i=t.slug,s=n.rejectWithValue,e.prev=2,e.next=5,$.a.put("/trakt/users/".concat(nt(),"/lists/").concat(i),{description:a,name:r,privacy:c,slug:i});case 5:return o=e.sent,e.abrupt("return",o.data);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",s(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()),ae=Object(x.b)("app/lists/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,$.a.get("/trakt/users/".concat(nt(),"/lists"));case 4:return r=e.sent,e.next=7,Promise.all(r.data.map((function(e){return $.a.get("/trakt/users/".concat(nt(),"/lists/").concat(e.ids.slug,"/items"))})));case 7:return c=e.sent,e.abrupt("return",r.data.map((function(e,t){return Object(F.a)(Object(F.a)({},e),{},{items:tt(c[t].data)})})));case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",a(e.t0.toString()));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),re=Object(x.c)({extraReducers:(R={},Object(Q.a)(R,ae.fulfilled,(function(e,t){return t.payload})),Object(Q.a)(R,ee.fulfilled,(function(e,t){e.push(Object(F.a)(Object(F.a)({},t.payload),{},{items:[]}))})),Object(Q.a)(R,te.fulfilled,(function(e,t){var n=t.meta.arg,a=e.findIndex((function(e){return e.ids.slug===n}));e.splice(a,1)})),Object(Q.a)(R,ne.fulfilled,(function(e,t){var n=t.meta.arg.slug,a=e.findIndex((function(e){return e.ids.slug===n}));e[a]=Object(F.a)(Object(F.a)({},e[a]),t.payload)})),R),initialState:[],name:"app/lists",reducers:{}}).reducer,ce=Object(x.b)("actions/list/add",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.entity,r=t.listSlug,c=t.slug,i=n.rejectWithValue,e.prev=2,e.next=5,$.a.post("/trakt/users/".concat(nt(),"/lists/").concat(r,"/items"),Object(Q.a)({},a,[{ids:{slug:c}}]));case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",i(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}()),ie=Object(x.b)("actions/list/remove",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.entity,r=t.listSlug,c=t.slug,i=n.rejectWithValue,e.prev=2,e.next=5,$.a.post("/trakt/users/".concat(nt(),"/lists/").concat(r,"/items/remove"),Object(Q.a)({},a,[{ids:{slug:c}}]));case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",i(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}());function se(e){return function(){var t=Object(X.a)(Y.a.mark((function t(n){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(ce(e));case 2:return t.next=4,n(ae());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function oe(e){return function(){var t=Object(X.a)(Y.a.mark((function t(n){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(ie(e));case 2:return t.next=4,n(ae());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function ue(){return Object(g.a)((function(e){return e.app.lists}),(function(e,t){return t}),(function(e,t,n){return n}),(function(e,t,n){return t=ct(t),e.map((function(e){return{listed:e.items.some((function(e){return e.type===t&&e[t].ids.slug===n})),name:e.name,slug:e.ids.slug}}))}))}function le(e){return e.loading}function de(e,t){return t}var je=Object(g.a)([le,de],(function(e,t){return Boolean(e[t])}));function pe(){return Object(g.a)([le,de],(function(e,t){return Object.keys(e).filter((function(e){return t.includes(e)})).some((function(t){return e[t]}))}))}var be=Object(z.a)({listItemActionRoot:{minWidth:32}});var me=function(e){var t=e.entity,n=e.size,c=void 0===n?"default":n,i=e.slug,s=be(),o=Object(u.b)(),l=Object(r.useMemo)(ue,[]),j=Object(r.useMemo)(pe,[]),p=Object(u.c)((function(e){return j(e,["app/lists/fetch","actions/list/add","actions/list/remove"])})),b=Object(u.c)((function(e){return l(e,t,i)})),m=Object(r.useState)(null),h=Object(O.a)(m,2),g=h[0],v=h[1],x=Boolean(g),y=Object(r.useMemo)((function(){return b.filter((function(e){var t=e.listed;return Boolean(t)})).length}),[b]);function w(e){v(e.currentTarget)}function P(e,t,n){return function(){var a=se;t&&(a=oe),o(a({entity:e,listSlug:n,slug:i}))}}var k=Object(a.jsx)(A.a,{color:"secondary",disabled:p,fullWidth:!0,onClick:w,startIcon:Object(a.jsx)(K.a,{}),variant:y?"contained":"outlined",children:y?"Listed on ".concat(y," lists"):"Add to your lists"});return"small"===c&&(k=Object(a.jsx)(B.a,{title:y?"Listed on ".concat(y," lists"):"Add to your lists",children:Object(a.jsx)(D.a,{color:y?"secondary":"inherit",onClick:w,size:"small",children:Object(a.jsx)(K.a,{fontSize:"small"})})})),Object(a.jsxs)(a.Fragment,{children:[k,Object(a.jsxs)(_.a,{anchorEl:g,anchorOrigin:{horizontal:"center",vertical:"bottom"},onClose:function(){v(null)},open:x,transformOrigin:{horizontal:"center",vertical:"top"},children:[p&&Object(a.jsx)(q.a,{color:"secondary"}),Object(a.jsxs)(f.a,{dense:!0,subheader:Object(a.jsxs)(G.a,{children:["Listed on ",y," of ",b.length," lists"]}),children:[b.map((function(e){var n=e.listed,r=e.name,c=e.slug;return Object(a.jsxs)(T.a,{button:!0,disabled:p,onClick:P(t,n,c),children:[Object(a.jsx)(U.a,{classes:{root:s.listItemActionRoot},children:Object(a.jsx)(J.a,{checked:n,disableRipple:!0,edge:"start",size:"small"})}),Object(a.jsx)(V.a,{children:r})]},c)})),Object(a.jsxs)(T.a,{button:!0,component:d.b,to:"?addList",children:[Object(a.jsx)(U.a,{classes:{root:s.listItemActionRoot}}),Object(a.jsx)(V.a,{children:"Add list"})]})]})]})]})},he=n(362),fe=n(363),Oe=Object(x.b)("app/recommendations/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,$.a.get("/trakt/users/".concat(nt(),"/recommendations?extended=full"));case 4:return r=e.sent,e.abrupt("return",r.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.toString()));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),ge=Object(x.c)({extraReducers:Object(Q.a)({},Oe.fulfilled,(function(e,t){return t.payload})),initialState:[],name:"app/recommendations",reducers:{}}).reducer,ve=Object(x.b)("actions/recommendations/recommend",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.entity,r=t.slug,c=n.rejectWithValue,e.prev=2,e.next=5,$.a.post("/trakt/sync/recommendations",Object(Q.a)({},a,[{ids:{slug:r}}]));case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",c(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}()),xe=Object(x.b)("actions/recommendations/unrecommend",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.entity,r=t.slug,c=n.rejectWithValue,e.prev=2,e.next=5,$.a.post("/trakt/sync/recommendations/remove",Object(Q.a)({},a,[{ids:{slug:r}}]));case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",c(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}());function ye(e){return function(){var t=Object(X.a)(Y.a.mark((function t(n){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(ve(e));case 2:return t.next=4,n(Oe());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function we(e){return function(){var t=Object(X.a)(Y.a.mark((function t(n){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(xe(e));case 2:return t.next=4,n(Oe());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function Pe(){return Object(g.a)([function(e){return e.app.recommendations},function(e,t){return ct(t)},function(e,t,n){return n}],(function(e,t,n){var a=e.find((function(e){return e.type===t&&e[t].ids.slug===n}));return Boolean(a)}))}var ke=function(e){var t=e.entity,n=e.size,c=void 0===n?"default":n,i=e.slug,s=Object(u.b)(),o=Object(r.useMemo)(Pe,[]),l=Object(r.useMemo)(pe,[]),d=Object(u.c)((function(e){return o(e,t,i)})),j=Object(r.useState)(!1),p=Object(O.a)(j,2),b=p[0],m=p[1],h=Object(u.c)((function(e){return l(e,["app/recommendations/fetch","actions/recommendations/recommend","actions/recommendations/unrecommend"])}))&&b;function f(){m(!0);var e=ye;d&&(e=we),s(e({entity:t,slug:i})).then((function(){return m(!1)}))}return"small"===c?Object(a.jsx)(B.a,{title:d?"Remove from recommendations":"Recommend",children:Object(a.jsx)("span",{children:Object(a.jsx)(D.a,{color:d?"secondary":"inherit",disabled:h,onClick:f,size:"small",children:h?Object(a.jsx)(he.a,{color:"secondary",size:20}):Object(a.jsx)(fe.a,{fontSize:"small"})})})}):Object(a.jsx)(A.a,{color:"secondary",disabled:h,fullWidth:!0,onClick:f,startIcon:Object(a.jsx)(fe.a,{}),variant:d?"contained":"outlined",children:d?"Remove from recommendations":"Recommend"})},Se=n(364),Ie=Object(x.b)("app/watchlist/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,$.a.get("/trakt/users/".concat(nt(),"/watchlist?extended=full"));case 4:return r=e.sent,e.abrupt("return",tt(r.data));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.toString()));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),Ce=Object(x.c)({extraReducers:Object(Q.a)({},Ie.fulfilled,(function(e,t){return t.payload})),initialState:[],name:"app/watchlist",reducers:{}}).reducer,Ne=Object(x.b)("actions/watchlist/add",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.entity,r=t.slug,c=n.rejectWithValue,e.prev=2,e.next=5,$.a.post("/trakt/sync/watchlist",Object(Q.a)({},a,[{ids:{slug:r}}]));case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",c(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}()),Re=Object(x.b)("actions/watchlist/remove",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.entity,r=t.slug,c=n.rejectWithValue,e.prev=2,e.next=5,$.a.post("/trakt/sync/watchlist/remove",Object(Q.a)({},a,[{ids:{slug:r}}]));case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",c(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}());function We(e){return function(){var t=Object(X.a)(Y.a.mark((function t(n){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(Ne(e));case 2:return t.next=4,n(Ie());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function ze(e){return function(){var t=Object(X.a)(Y.a.mark((function t(n){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(Re(e));case 2:return t.next=4,n(Ie());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function Le(){return Object(g.a)([function(e){return e.app.watchlist},function(e,t){return ct(t)},function(e,t,n){return n}],(function(e,t,n){var a=e.find((function(e){return e.type===t&&e[t].ids.slug===n}));return Boolean(a)}))}var Fe=function(e){var t=e.entity,n=e.size,c=void 0===n?"default":n,i=e.slug,s=Object(u.b)(),o=Object(r.useMemo)(Le,[]),l=Object(r.useMemo)(pe,[]),d=Object(u.c)((function(e){return o(e,t,i)})),j=Object(r.useState)(!1),p=Object(O.a)(j,2),b=p[0],m=p[1],h=Object(u.c)((function(e){return l(e,["app/watchlist/fetch","actions/watchlist/add","actions/watchlist/remove"])}))&&b;function f(){m(!0);var e=We;d&&(e=ze),s(e({entity:t,slug:i})).then((function(){return m(!1)}))}return"small"===c?Object(a.jsx)(B.a,{title:d?"Remove from watchlist":"Add to watchlist",children:Object(a.jsx)("span",{children:Object(a.jsx)(D.a,{color:d?"secondary":"inherit",disabled:h,onClick:f,size:"small",children:h?Object(a.jsx)(he.a,{color:"secondary",size:20}):Object(a.jsx)(Se.a,{fontSize:"small"})})})}):Object(a.jsx)(A.a,{color:"secondary",disabled:h,fullWidth:!0,onClick:f,startIcon:Object(a.jsx)(Se.a,{}),variant:d?"contained":"outlined",children:d?"Remove from watchlist":"Add to watchlist"})};var Te=function(e){var t=e.entity,n=e.season,a=e.size,r=e.tmdbId,c=e.type;if(t=ct(t),!r)return"/images/placeholder.png";var i="/images/".concat(t,"/").concat(r,"/").concat(c,"?");return void 0!==n&&(i+="season=".concat(n)),a&&(i+="size=".concat(a)),i},Ve=Object(z.a)((function(e){return{children:{textAlign:"center"},content:{bottom:e.spacing(1),left:e.spacing(1),position:"absolute"},footer:{"& > *:not(:last-child)":{marginRight:e.spacing(1)},backgroundColor:e.palette.grey[900]},link:function(t){var n=t.backgroundImage,a=t.isPerson;return{background:"url(".concat(n,") no-repeat ").concat(a?"top center":"center"),color:e.palette.primary.contrastText,display:"block",paddingTop:"148%",position:"relative",width:"100%"}},root:{}}}));var Ee=function(e){var t=e.children,n=e.content,r=e.entity,c=e.season,i=e.size,s=void 0===i?"default":i,o=e.slug,u=e.tmdbId,l="people"===r,j="small"===s,p=Te({entity:r,season:c,size:l?j?"w185":"h632":j?"w185":"w342",tmdbId:u,type:l?"profile":"poster"}),b=Ve({backgroundImage:p,isPerson:l});return Object(a.jsxs)("div",{className:b.root,children:[Object(a.jsx)(d.b,{className:b.link,style:{backgroundSize:"cover"},to:"/app/".concat(r,"/").concat(o),children:n&&Object(a.jsx)("div",{className:b.content,children:n})}),Object(a.jsx)("div",{className:b.children,children:t})]})},Me=Object(z.a)((function(e){return{chips:{"& > *":{margin:"0 ".concat(e.spacing(.5),"px ").concat(e.spacing(.5),"px 0")}},footer:{backgroundColor:e.palette.grey[900],color:e.palette.common.white,padding:8}}}));var Ae=function(e){var t=e.actions,n=e.children,r=e.chips,c=void 0===r?[]:r,i=e.entity,s=e.primary,o=e.season,u=e.secondary,l=e.size,d=e.slug,p=e.tmdbId,b=Me(),h="people"===i,f=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:b.chips,children:c.map((function(e){return Object(a.jsx)(M.a,{color:"secondary",label:e,size:"small"},e)}))}),Object(a.jsx)(m.a,{display:"inline",variant:"subtitle2",children:s}),u&&Object(a.jsxs)(m.a,{display:"inline",variant:"caption",children:[" ",u]})]});return Object(a.jsxs)(Ee,{content:f,entity:i,season:o,size:l,slug:d,tmdbId:p,children:[Object(a.jsx)("div",{className:b.footer,children:Object(a.jsxs)(j.a,{container:!0,justify:"space-between",children:[Object(a.jsxs)(j.a,{container:!0,item:!0,spacing:1,xs:6,children:[Object(a.jsx)(me,{entity:i,size:"small",slug:d}),!h&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Fe,{entity:i,size:"small",slug:d}),Object(a.jsx)(ke,{entity:i,size:"small",slug:d})]})]}),Object(a.jsx)(j.a,{container:!0,item:!0,justify:"flex-end",spacing:1,xs:6,children:t})]})}),n]})},Be=n(366),De=n(403),_e=Object(x.b)("app/ratings/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,$.a.get("/trakt/users/".concat(nt(),"/ratings"));case 4:return r=e.sent,e.abrupt("return",tt(r.data));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.toString()));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),qe=Object(x.c)({extraReducers:Object(Q.a)({},_e.fulfilled,(function(e,t){return t.payload})),initialState:[],name:"app/ratings",reducers:{}}).reducer,Ge=Object(x.b)("actions/ratings/rate",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.entity,r=t.rating,c=t.slug,i=n.rejectWithValue,e.prev=2,e.next=5,$.a.post("/trakt/sync/ratings",Object(Q.a)({},a,[{ids:{slug:c},rating:r}]));case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",i(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}()),Ue=Object(x.b)("actions/ratings/remove",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.entity,r=t.slug,c=n.rejectWithValue,e.prev=2,e.next=5,$.a.post("/trakt/sync/ratings/remove",Object(Q.a)({},a,[{ids:{slug:r}}]));case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",c(e.t0.toString()));case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}());function Je(){return Object(g.a)([function(e){return e.app.ratings},function(e,t){return ct(t)},function(e,t,n){return n}],(function(e,t,n){var a=e.find((function(e){return e.type===t&&e[t].ids.slug===n}));return a?a.rating:0}))}var Ke=Object(z.a)((function(e){return{buttonRoot:{minWidth:154},ratingRoot:{color:e.palette.secondary.main}}}));function He(e){switch(e){case-1:return"Unrate";case 1:return"1 - Weak sauce";case 2:return"2 - Terrible";case 3:return"3 - Bad";case 4:return"4 - Poor";case 5:return"5 - Meh";case 6:return"6 - Fair";case 7:return"7 - Good";case 8:return"8 - Great";case 9:return"9 - Superb";case 10:return"10 - Excellent!";default:return"Rate"}}var Ye=function(e){var t=e.entity,n=e.overallRating,c=e.size,i=e.slug,s=Ke(),o=Object(u.b)(),l=Object(r.useMemo)(Je,[]),d=Object(r.useMemo)(pe,[]),j=Object(u.c)((function(e){return l(e,t,i)})),p=Object(u.c)((function(e){return d(e,["app/ratings/fetch","actions/ratings/rate","actions/ratings/remove"])})),h=Object(r.useState)(null),f=Object(O.a)(h,2),g=f[0],v=f[1],x=Boolean(g),y=Object(r.useState)(null),w=Object(O.a)(y,2),P=w[0],k=w[1],S=null!==P;function I(e){v(e.currentTarget)}var C,N=Object(a.jsx)(A.a,{classes:{root:s.buttonRoot},color:"secondary",fullWidth:!0,onClick:I,startIcon:Object(a.jsx)(Be.a,{}),variant:j?"contained":"outlined",children:He(S?P:j)});return"small"===c&&(N=Object(a.jsx)(B.a,{title:"Rate",children:Object(a.jsxs)("span",{children:[Object(a.jsx)(m.a,{color:n||!j?"inherit":"secondary",variant:"caption",children:n||(C=S?P:j,-1===C?0:C)}),Object(a.jsx)(D.a,{color:j?"secondary":"inherit",onClick:I,size:"small",children:Object(a.jsx)(Be.a,{fontSize:"small"})})]})})),Object(a.jsxs)(a.Fragment,{children:[N,Object(a.jsxs)(_.a,{anchorEl:g,anchorOrigin:{horizontal:"center",vertical:"bottom"},onClose:function(){k(null),v(null)},open:x,transformOrigin:{horizontal:"center",vertical:"top"},children:[p&&Object(a.jsx)(q.a,{color:"secondary"}),Object(a.jsxs)(b.a,{p:1,pb:.5,children:["small"===c&&Object(a.jsx)(b.a,{textAlign:"center",children:He(S?P:j)}),Object(a.jsx)(De.a,{classes:{root:s.ratingRoot},disabled:p,icon:Object(a.jsx)(Be.a,{fontSize:"inherit"}),max:10,name:"_",onChange:function(e,n){var a;o(n?function(e){return function(){var t=Object(X.a)(Y.a.mark((function t(n){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(Ge(e));case 2:return t.next=4,n(_e());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({entity:t,rating:n,slug:i}):(a={entity:t,slug:i},function(){var e=Object(X.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(Ue(a));case 2:return e.next=4,t(_e());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},onChangeActive:function(e,t){k(t!==j?-1!==t?t:null:-1)},value:j})]})]})]})};var Qe=function(e){var t=e.entity,n=e.overallRating,r=e.slug;return Object(a.jsx)(Ae,Object(F.a)({actions:Object(a.jsx)(Ye,{entity:t,overallRating:n,size:"small",slug:r})},e))},Xe=["movie","person","show"],Ze=20,$e=36;function et(e){if(!e)return[];var t=e.ratings,n=e.stats,r=e.summary;return[["Rating",ot(null===t||void 0===t?void 0:t.rating)],["Votes",st(null===t||void 0===t?void 0:t.votes)],["Released",new Date(null===r||void 0===r?void 0:r.released).toLocaleDateString("da-Dk")],["Genres",null===r||void 0===r?void 0:r.genres.map(E.a).join(", ")],["Certification",null===r||void 0===r?void 0:r.certification],["Watchers",st(null===n||void 0===n?void 0:n.watchers)],["Plays",st(null===n||void 0===n?void 0:n.plays)],["Lists",st(null===n||void 0===n?void 0:n.lists)],["Comments",st(null===n||void 0===n?void 0:n.comments)],["Trailer",Object(a.jsx)("a",{href:null===r||void 0===r?void 0:r.trailer,rel:"noreferrer",target:"_blank",children:"Watch trailer"})]]}function tt(e){return e.filter((function(e){var t=e.type;return Xe.includes(t)}))}function nt(){return document.cookie.split("; ").reduce((function(e,t){var n=t.split("="),a=Object(O.a)(n,2),r=a[0],c=a[1];return e[r]=c,e}),{}).userSlug}function at(e){var t,n=e.item,r=e.TileProps,c=e.WrapperComponent,i=e.WrapperProps,s=n.type;n=n[s];var o={chips:[Object(E.a)(s)],entity:it(s),slug:n.ids.slug,tmdbId:n.ids.tmdb};return"person"===s?(t=Ae,o.primary=n.name):(t=Qe,o.primary=n.title,o.secondary=n.year,o.overallRating=ot(n.rating,0)),o=Object(F.a)(Object(F.a)({},o),r),c?Object(a.jsx)(c,Object(F.a)(Object(F.a)({},i),{},{children:Object(a.jsx)(t,Object(F.a)({},o))}),n.ids.slug):Object(a.jsx)(t,Object(F.a)({},o),n.ids.slug)}function rt(e,t,n){var r=e.type;e=e[r];var c={entity:it(r),slug:e.ids.slug,tmdbId:e.ids.tmdb};return t?Object(a.jsx)(t,Object(F.a)(Object(F.a)({},n),{},{children:Object(a.jsx)(Ee,Object(F.a)({},c))}),e.ids.slug):Object(a.jsx)(Ee,Object(F.a)({},c),e.ids.slug)}function ct(e){switch(e){case"movies":return"movie";case"shows":return"show";case"people":return"person";default:return"movie,show,person"}}function it(e){switch(e){case"movie":return"movies";case"show":return"shows";case"person":return"people";default:return""}}function st(e){return e?Math.abs(e)>999?Math.sign(e)*(Math.abs(e)/1e3).toFixed(1)+"k":Math.sign(e)*Math.abs(e):""}function ot(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e?"".concat((10*e).toFixed(t),"%"):""}var ut=n(3),lt=n(369),dt=n(367),jt=n(368),pt=Object(z.a)((function(e){return{nestedListItemGutters:{paddingLeft:e.spacing(4)}}}));var bt=function(e){var t=e.children,n=e.listItemTextProps,i=Object(ut.a)(e,["children","listItemTextProps"]),s=pt(),o=Object(r.useState)(!1),u=Object(O.a)(o,2),l=u[0],d=u[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(T.a,Object(F.a)(Object(F.a)({},i),{},{onClick:function(e){e.preventDefault(),d(!l)},children:[Object(a.jsx)(V.a,Object(F.a)({},n)),l?Object(a.jsx)(dt.a,{}):Object(a.jsx)(jt.a,{})]})),Object(a.jsx)(lt.a,{in:l,children:Object(a.jsx)(f.a,{disablePadding:!0,children:c.a.Children.map(t,(function(e){return c.a.cloneElement(e,{classes:{gutters:s.nestedListItemGutters}})}))})})]})},mt=[{nested:[{path:"movies/trending",title:"Trending"},{path:"movies/popular",title:"Popular"},{path:"movies/recommended",title:"Recommended"},{path:"movies/watched",title:"Watched"},{path:"movies/anticipated",title:"Anticipated"}],title:"Movies"},{nested:[{path:"shows/trending",title:"Trending"},{path:"shows/popular",title:"Popular"},{path:"shows/recommended",title:"Recommended"},{path:"shows/watched",title:"Watched"},{path:"shows/anticipated",title:"Anticipated"}],title:"Shows"},{nested:[{path:"users/".concat(nt(),"/feed"),title:"Feed"},{path:"users/".concat(nt(),"/ratings"),title:"Ratings"},{path:"users/".concat(nt(),"/recommendations"),title:"Recommendations"},{path:"users/".concat(nt(),"/watchlist"),title:"Watchlist"},{path:"users/".concat(nt(),"/lists"),title:"Lists"},{path:"users/".concat(nt(),"/comments"),title:"Comments"}],title:"Profile"},{nested:[{path:"search/all",title:"All"},{path:"search/movies",title:"Movies"},{path:"search/shows",title:"Shows"},{path:"search/people",title:"People"}],title:"Search"},{nested:[{path:"games/lets-pick",title:"Let's pick"}],title:"Games"}];var ht=function(){var e=L();return Object(a.jsxs)(j.a,{children:[Object(a.jsxs)(p.a,{anchor:"left",classes:{paper:e.drawerPaper},color:"",variant:"permanent",children:[Object(a.jsxs)(b.a,{px:2,py:1,children:[Object(a.jsx)(m.a,{variant:"h6",children:"Traktor"}),Object(a.jsx)(m.a,{variant:"caption",children:"v0.1"})]}),Object(a.jsx)(h.a,{}),Object(a.jsx)(f.a,{disablePadding:!0,children:mt.map((function(e){var t=e.nested,n=e.path,c=e.title,i={activeClassName:"Mui-selected",button:!0,component:d.c,key:c,to:n};if(!t&&n)return Object(a.jsx)(T.a,Object(F.a)(Object(F.a)({},i),{},{children:Object(a.jsx)(V.a,{primary:c})}));var s=t.map((function(e){var t=e.path,n=e.title;return Object(r.createElement)(T.a,Object(F.a)(Object(F.a)({},i),{},{key:n,to:t}),Object(a.jsx)(V.a,{primary:n}))})),o={button:!0,key:c,listItemTextProps:{primary:c}};return Object(a.jsx)(bt,Object(F.a)(Object(F.a)({},o),{},{children:s}))}))})]}),Object(a.jsxs)(b.a,{ml:32,children:[Object(a.jsx)(W,{}),Object(a.jsx)(l.b,{})]})]})},ft=n(372),Ot=n(373),gt=n(374),vt=n(394),xt=n(371);var yt=function(e){var t=e.description,n=void 0===t?"":t,c=e.disabled,i=void 0!==c&&c,s=e.isPrivate,o=void 0!==s&&s,u=e.name,l=void 0===u?"":u,d=e.onSubmit,j=Object(r.useState)({description:n||"",isPrivate:o||!1,name:l||""}),p=Object(O.a)(j,2),m=p[0],h=p[1];function f(){h({description:n,isPrivate:o,name:l})}return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(b.a,{mb:2,children:Object(a.jsx)(vt.a,{disabled:i,fullWidth:!0,label:"Name",onChange:function(e){var t=e.target.value;h(Object(F.a)(Object(F.a)({},m),{},{name:t}))},size:"small",value:m.name,variant:"outlined"})}),Object(a.jsx)(b.a,{mb:0,children:Object(a.jsx)(vt.a,{disabled:i,fullWidth:!0,helperText:"Enhance your comment with :emoji:, **bold**, _italics_, ~~strike~~, ==highlight==, >quote, `code`, [spoiler]text[/spoiler]",label:"Description",multiline:!0,onChange:function(e){var t=e.target.value;h(Object(F.a)(Object(F.a)({},m),{},{description:t}))},size:"small",value:m.description,variant:"outlined"})}),Object(a.jsxs)("div",{style:{textAlign:"right"},children:[Object(a.jsx)(xt.a,{color:"primary",disabled:i,onChange:function(){h(Object(F.a)(Object(F.a)({},m),{},{isPrivate:!m.isPrivate}))},selected:m.isPrivate,size:"small",value:m.isPrivate,children:m.isPrivate?"Private":"Public"})," ",Object(a.jsx)(A.a,{color:"secondary",disabled:i,onClick:function(){d({description:m.description,name:m.name,privacy:m.isPrivate?"private":"public",reset:f})},variant:"outlined",children:"Submit"})]})]})};var wt=function(){var e=Object(u.b)(),t=Object(d.d)(),n=Object(O.a)(t,2),c=n[0],i=n[1],s=Object(u.c)((function(e){return je(e,"actions/lists/add")})),o=Object(r.useMemo)((function(){return Object.fromEntries(c)}),[c]),l=o.addList,j=Object(ut.a)(o,["addList"]),p=void 0!==l;function m(){i(Object(F.a)({},j))}return Object(a.jsxs)(ft.a,{onClose:m,open:p,children:[Object(a.jsx)(Ot.a,{children:"Add list"}),Object(a.jsx)(gt.a,{children:Object(a.jsx)(b.a,{mb:1,children:Object(a.jsx)(yt,{disabled:s,onSubmit:function(t){var n=t.reset,a=Object(ut.a)(t,["reset"]);e(ee(a)).then((function(){n(),m()}))}})})})]})},Pt=Object(z.a)((function(e){return{root:{alignItems:"center",backgroundColor:e.palette.text.primary,display:"flex",height:"100%",justifyContent:"center",position:"fixed",top:0,width:"100%",zIndex:e.zIndex.tooltip+1}}}));var kt=function(e){var t=e.fullscreen,n=void 0===t||t,c=Pt();return Object(r.useEffect)((function(){return document.body.style.overflow="hidden",function(){return document.body.style.overflow="initial"}}),[]),n?s.a.createPortal(Object(a.jsx)("div",{className:c.root,children:Object(a.jsx)(he.a,{color:"secondary",size:64})}),document.getElementById("loadingOverlayRoot")):Object(a.jsx)("h1",{children:"hi"})};var St=function(){return Object(a.jsx)("h1",{children:"404 not found"})};var It=function(){var e=Object(l.h)();Object(r.useEffect)((function(){window.scrollTo({top:0})}),[e])},Ct=n(165),Nt=n(375),Rt=n(376),Wt=n(94),zt=n.n(Wt),Lt=n(95),Ft=n.n(Lt),Tt=Object(x.b)("actions/comments/post",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i,s,o,u,l;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.comment,r=t.entity,c=t.slug,i=t.spoiler,s=void 0!==i&&i,o=n.rejectWithValue,r=ct(r),e.prev=3,e.next=6,$.a.post("/trakt/comments",(u={comment:a},Object(Q.a)(u,r,{ids:{slug:c}}),Object(Q.a)(u,"spoiler",s),u));case 6:return l=e.sent,e.abrupt("return",l.data);case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",o(e.t0.toString()));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n){return e.apply(this,arguments)}}()),Vt=Object(x.b)("actions/comments/remove",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,$.a.delete("/trakt/comments/".concat(t));case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",a(e.t0.toString()));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()),Et=Object(x.b)("actions/comments/update",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i,s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.comment,r=t.id,c=t.spoiler,i=n.rejectWithValue,e.prev=2,e.next=5,$.a.put("/trakt/comments/".concat(r),{comment:a,spoiler:c});case 5:return s=e.sent,e.abrupt("return",s.data);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",i(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}());var Mt=function(e){var t=e.comment,n=void 0===t?"":t,c=e.disabled,i=void 0!==c&&c,s=e.onSubmit,o=e.spoiler,u=void 0!==o&&o,l=Object(r.useState)({comment:n||"",spoiler:u||!1}),d=Object(O.a)(l,2),j=d[0],p=d[1];function b(){p({comment:n,spoiler:u})}return Object(a.jsxs)("div",{children:[Object(a.jsx)(vt.a,{disabled:i,fullWidth:!0,helperText:"Enhance your comment with :emoji:, **bold**, _italics_, ~~strike~~, ==highlight==, >quote, `code`, [spoiler]text[/spoiler]",label:"Your comment",multiline:!0,onChange:function(e){var t=e.target.value;p(Object(F.a)(Object(F.a)({},j),{},{comment:t}))},value:j.comment,variant:"outlined"}),Object(a.jsxs)("div",{style:{textAlign:"right"},children:[Object(a.jsx)(xt.a,{color:"primary",disabled:i,onChange:function(){p(Object(F.a)(Object(F.a)({},j),{},{spoiler:!j.spoiler}))},selected:j.spoiler,size:"small",value:j.spoiler,children:j.spoiler?"Marked as spoiler":"Mark as spoiler"})," ",Object(a.jsx)(A.a,{color:"secondary",disabled:i,onClick:function(){s({comment:j.comment,reset:b,spoiler:j.spoiler})},variant:"outlined",children:"Submit"})]})]})};var At=function(e){var t=e.comment,n=e.createdAt,c=e.id,i=e.review,s=e.spoiler,o=e.username,l=e.userRating,p=e.userSlug,h=Object(r.useMemo)(pe,[]),f=Object(u.b)(),g=Object(u.c)((function(e){return h(e,["actions/comments/update","actions/comments/remove"])})),v=Object(r.useState)(null),x=Object(O.a)(v,2),y=x[0],w=x[1],P=nt()===p,k="editing"===y,S="removing"===y,I=[Object(a.jsxs)(m.a,{display:"inline",variant:"body2",children:[i?"Review":"Shout"," by"," ",Object(a.jsx)(d.b,{to:"/app/users/".concat(p),children:o})]},"".concat(o,"-comment-").concat(c,"-label-0")),Object(a.jsx)("span",{children:" | "},"".concat(o,"-comment-").concat(c,"-label-1")),Object(a.jsx)(m.a,{display:"inline",variant:"caption",children:new Date(n).toLocaleString("da-DK")},"".concat(o,"-comment-").concat(c,"-label-2")),l&&Object(a.jsxs)(r.Fragment,{children:[" | ",Object(a.jsxs)(m.a,{display:"inline",variant:"caption",children:["rated ",l]})]},"".concat(o,"-comment-").concat(c,"-label-3")),s&&Object(a.jsxs)(a.Fragment,{children:[" | "," ",Object(a.jsx)(M.a,{label:"Spoiler",size:"small"})]})];return Object(a.jsxs)(a.Fragment,{children:[(k||S)&&g&&Object(a.jsx)(q.a,{color:"secondary"}),Object(a.jsxs)(b.a,{component:Ct.a,p:2,children:[Object(a.jsxs)(j.a,{alignItems:"center",container:!0,justify:"space-between",children:[Object(a.jsx)(j.a,{item:!0,children:I.map((function(e){return e}))}),P&&Object(a.jsxs)(j.a,{item:!0,children:[Object(a.jsx)(D.a,{onClick:function(){w(k?"default":"editing")},size:"small",children:Object(a.jsx)(Nt.a,{fontSize:"small"})}),Object(a.jsx)(D.a,{onClick:function(){w("removing"),f(Vt(c))},size:"small",children:Object(a.jsx)(Rt.a,{fontSize:"small"})})]})]}),k?Object(a.jsx)(b.a,{mt:2,children:Object(a.jsx)(Mt,{comment:t,disabled:g,onSubmit:function(e){e.reset;var t=Object(ut.a)(e,["reset"]);f(Et(Object(F.a)(Object(F.a)({},t),{},{id:c}))).then((function(){return w("default")}))},spoiler:s})}):Object(a.jsx)(Ft.a,{allowDangerousHtml:!0,children:zt.a.shortnameToImage(t)})]})]})};function Bt(e){var t={comment:e.comment,createdAt:e.created_at,id:e.id,review:e.review,spoiler:e.spoiler,username:e.user.username,userRating:e.user_rating,userSlug:e.user.ids.slug},n=t.id;return Object(a.jsx)(At,Object(F.a)({},t),n)}var Dt=[["highest","Highest"],["newest","Newest"],["likes","Likes"]],_t=n(377),qt=Object(z.a)((function(e){return{textFieldRoot:{minWidth:133}}}));var Gt=function(e){var t=e.onChange,n=e.value,r=qt();return Object(a.jsx)(vt.a,{classes:{root:r.textFieldRoot},label:"Sort comments by",onChange:function(e){var n=e.target.value;t(n)},select:!0,size:"small",value:n,variant:"outlined",children:Dt.map((function(e){var t=Object(O.a)(e,2),n=t[0],r=t[1];return Object(a.jsx)(_t.a,{value:n,children:r},n)}))})},Ut=n(378),Jt=n(379),Kt=n(380),Ht=n(381),Yt=Object(z.a)((function(e){return{root:function(t){var n=t.isWrapped;return{"& > *:not(:last-child)":{marginRight:e.spacing(1)},display:n?"block":"inline-block",margin:n?"".concat(e.spacing(1),"px 0"):"initial",textAlign:n?"right":"inherit"}}}}));var Qt=function(e){var t=e.disabled,n=void 0!==t&&t,r=e.hasNextPage,c=e.hasPreviousPage,i=e.onFirstPage,s=e.onLastPage,o=e.onNextPage,u=e.onPreviousPage,l=e.page,d=e.pagesTotal,j=e.variant,p=Yt({isWrapped:"wrapped"===(void 0===j?"wrapped":j)}),b=n||1===l,h=n||!c,f=n||!r,O=n||l===d;return Object(a.jsxs)("div",{className:p.root,children:[Object(a.jsx)(B.a,{title:"Go to first page",children:Object(a.jsx)("span",{children:Object(a.jsx)(D.a,{disabled:b,onClick:i,size:"small",children:Object(a.jsx)(Ut.a,{})})})}),Object(a.jsx)(B.a,{title:"Go to previous page",children:Object(a.jsx)("span",{children:Object(a.jsx)(D.a,{disabled:h,onClick:u,size:"small",children:Object(a.jsx)(Jt.a,{})})})}),Object(a.jsxs)(m.a,{variant:"caption",children:["Page ",l," of ",d]}),Object(a.jsx)(B.a,{title:"Go to next page",children:Object(a.jsx)("span",{children:Object(a.jsx)(D.a,{disabled:f,onClick:o,size:"small",children:Object(a.jsx)(Kt.a,{})})})}),Object(a.jsx)(B.a,{title:"Go to last page",children:Object(a.jsx)("span",{children:Object(a.jsx)(D.a,{disabled:O,onClick:s,size:"small",children:Object(a.jsx)(Ht.a,{})})})})]})};var Xt,Zt,$t,en=function(e){var t=Object(d.d)(),n=Object(O.a)(t,2),a=n[0],c=n[1],i=Object(r.useMemo)((function(){return Object.fromEntries(a)}),[a]),s=i.page,o=void 0===s?"1":s,l=Object(ut.a)(i,["page"]),j=Object(u.c)(e);return{hasNextPage:parseInt(o)<j,hasPreviousPage:parseInt(o)>1,page:parseInt(o),pagesTotal:j,toFirstPage:function(){c(Object(F.a)({page:1},l))},toLastPage:function(){c(Object(F.a)({page:j},l))},toNextPage:function(){c(Object(F.a)({page:parseInt(o)+1},l))},toPage:function(e){c(Object(F.a)({page:parseInt(e)},l))},toPreviousPage:function(){c(Object(F.a)({page:parseInt(o)-1},l))}}},tn=Object(g.a)((function(e){return e.comments.entities}),(function(e){return e})),nn=Object(g.a)((function(e){return e.comments.pagination.total}),(function(e){return e})),an=Object(x.b)("movie/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i,s,o,u,l,d;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,Promise.all([$.a.get("/trakt/movies/".concat(t,"/stats")),$.a.get("/trakt/movies/".concat(t,"?extended=full")),$.a.get("/trakt/movies/".concat(t,"/comments/highest")),$.a.get("/trakt/movies/".concat(t,"/people")),$.a.get("/trakt/movies/".concat(t,"/ratings")),$.a.get("/trakt/movies/".concat(t,"/related?extended=full"))]);case 4:return r=e.sent,c=Object(O.a)(r,6),i=c[0],s=c[1],o=c[2],u=c[3],l=c[4],d=c[5],e.abrupt("return",{comments:o.data,people:u.data,ratings:l.data,related:d.data,stats:i.data,summary:s.data});case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",a(e.t0.toString()));case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,n){return e.apply(this,arguments)}}()),rn=Object(x.c)({extraReducers:(Xt={},Object(Q.a)(Xt,an.fulfilled,(function(e,t){return t.payload})),Object(Q.a)(Xt,Vt.fulfilled,(function(e,t){var n=t.meta.arg,a=e.comments.findIndex((function(e){return e.id===n}));-1!==a&&e.comments.splice(a,1)})),Object(Q.a)(Xt,Et.fulfilled,(function(e,t){var n=e.comments.findIndex((function(e){return e.id===t.payload.id}));-1!==n&&(e.comments[n]=t.payload)})),Xt),initialState:{comments:[],people:null,ratings:null,related:[],stats:null,summary:null},name:"movie",reducers:{}}).reducer,cn=Object(x.b)("show/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i,s,o,u,l,d,j;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,Promise.all([$.a.get("/trakt/shows/".concat(t,"?extended=full")),$.a.get("/trakt/shows/".concat(t,"/comments/highest")),$.a.get("/trakt/shows/".concat(t,"/people")),$.a.get("/trakt/shows/".concat(t,"/ratings")),$.a.get("/trakt/shows/".concat(t,"/related?extended=full")),$.a.get("/trakt/shows/".concat(t,"/stats")),$.a.get("/trakt/shows/".concat(t,"/seasons?extended=episodes"))]);case 4:return r=e.sent,c=Object(O.a)(r,7),i=c[0],s=c[1],o=c[2],u=c[3],l=c[4],d=c[5],j=c[6],e.abrupt("return",{comments:s.data,people:o.data,ratings:u.data,related:l.data,seasons:j.data.reverse(),stats:d.data,summary:i.data});case 16:return e.prev=16,e.t0=e.catch(1),e.abrupt("return",a(e.t0.toString()));case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t,n){return e.apply(this,arguments)}}()),sn=Object(x.c)({extraReducers:(Zt={},Object(Q.a)(Zt,cn.fulfilled,(function(e,t){return t.payload})),Object(Q.a)(Zt,Vt.fulfilled,(function(e,t){var n=t.meta.arg,a=e.comments.findIndex((function(e){return e.id===n}));-1!==a&&e.comments.splice(a,1)})),Object(Q.a)(Zt,Et.fulfilled,(function(e,t){var n=e.comments.findIndex((function(e){return e.id===t.payload.id}));-1!==n&&(e.comments[n]=t.payload)})),Zt),initialState:{comments:[],people:null,ratings:null,related:[],seasons:[],stats:null,summary:null},name:"show",reducers:{}}).reducer,on=Object(x.b)("comments/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i,s,o,u,l,d;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.entity,r=t.limit,c=void 0===r?Ze:r,i=t.page,s=void 0===i?1:i,o=t.slug,u=t.sort,l=n.rejectWithValue,e.prev=2,e.next=5,$.a.get("/trakt/".concat(a,"/").concat(o,"/comments/").concat(u,"?page=").concat(s,"&limit=").concat(c));case 5:return d=e.sent,e.abrupt("return",{entities:d.data,total:parseInt(d.headers["x-pagination-page-count"])});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",l(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}());var un=Object(x.c)({extraReducers:($t={},Object(Q.a)($t,on.fulfilled,(function(e,t){e.entities=t.payload.entities,e.pagination.total=t.payload.total})),Object(Q.a)($t,Tt.fulfilled,(function(e,t){e.entities.unshift(t.payload)})),Object(Q.a)($t,Vt.fulfilled,(function(e,t){var n=t.meta.arg,a=e.entities.findIndex((function(e){return e.id===n}));-1!==a&&e.entities.splice(a,1)})),Object(Q.a)($t,Et.fulfilled,(function(e,t){var n=e.entities.findIndex((function(e){return e.id===t.payload.id}));-1!==n&&(e.entities[n]=t.payload)})),$t),initialState:{entities:[],pagination:{total:0}},name:"comments",reducers:{}}).reducer,ln=Object(g.a)((function(e){return e.movie}),(function(e){return e})),dn=Object(g.a)((function(e){return e.show}),(function(e){return e})),jn=Object(z.a)((function(e){return{buttons:{"& > *:not(last-child)":{marginBottom:e.spacing(1)}},commentsRoot:{"& > *:not(:last-child)":{marginBottom:e.spacing(1)}},content:{"& > *:not(:last-child)":{marginBottom:e.spacing(2)},marginLeft:342,paddingLeft:e.spacing(2)},facts:{display:"flex",flexWrap:"wrap"},factsItem:{"& > :first-child":{marginRight:e.spacing(1)},marginBottom:e.spacing(1),marginRight:e.spacing(2),whiteSpace:"nowrap"},fixedColumn:{position:"fixed",width:342},overview:{marginBottom:e.spacing(3)},root:{padding:e.spacing(2),position:"relative"}}})),pn=[["Comments","#comments"]];var bn=function(e){var t,n,c,i=e.entity,s=jn(),o=Object(r.useRef)(!0),d=Object(l.j)().slug,p=Object(u.b)(),b=en(nn),g=b.hasNextPage,v=b.hasPreviousPage,x=b.page,y=b.pagesTotal,w=b.toFirstPage,P=b.toLastPage,k=b.toNextPage,S=b.toPreviousPage,I=Object(u.c)("movies"===i?ln:dn),C=Object(u.c)(tn),N=Object(u.c)((function(e){return je(e,"actions/comments/post")})),R=Object(r.useState)("highest"),W=Object(O.a)(R,2),z=W[0],L=W[1];return Object(r.useEffect)((function(){if(o.current)return o.current=!1,void p(function(e){var t=e.entity,n=e.slug,a="movies"===t?an:cn;return function(){var t=Object(X.a)(Y.a.mark((function t(r){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([r(a(n)),r(on(e))]);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({entity:i,page:x,slug:d,sort:"highest"}));p(on({entity:i,page:x,slug:d,sort:z}))}),[p,i,x,d,z]),Object(a.jsxs)("div",{className:s.root,children:[Object(a.jsxs)("div",{className:s.fixedColumn,children:[Object(a.jsx)(Ee,{entity:i,slug:d,tmdbId:null===(t=I.summary)||void 0===t?void 0:t.ids.tmdb}),Object(a.jsx)(f.a,{children:pn.map((function(e){var t=Object(O.a)(e,2),n=t[0],c=t[1];return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(T.a,{button:!0,component:"a",href:c,children:Object(a.jsx)(V.a,{children:n})}),Object(a.jsx)(h.a,{})]},c)}))}),Object(a.jsxs)("div",{className:s.buttons,children:[Object(a.jsx)(me,{entity:i,slug:d}),Object(a.jsx)(Fe,{entity:i,slug:d}),Object(a.jsx)(ke,{entity:i,slug:d}),Object(a.jsx)(Ye,{entity:i,slug:d})]})]}),Object(a.jsxs)("div",{className:s.content,children:[Object(a.jsxs)("div",{className:s.overview,id:"overview",children:[Object(a.jsx)(m.a,{display:"block",variant:"overline",children:"All comments about:"}),Object(a.jsxs)(m.a,{display:"inline",variant:"h4",children:[null===(n=I.summary)||void 0===n?void 0:n.title," "]}),Object(a.jsx)(m.a,{color:"textSecondary",display:"inline",variant:"h5",children:null===(c=I.summary)||void 0===c?void 0:c.year})]}),Object(a.jsx)(m.a,{id:"actors",variant:"h5",children:"Add comment"}),Object(a.jsx)(Mt,{disabled:N,onSubmit:function(e){var t=e.reset,n=Object(ut.a)(e,["reset"]);p(Tt(Object(F.a)(Object(F.a)({},n),{},{entity:i,slug:d}))).then(t)}}),Object(a.jsxs)(j.a,{alignItems:"flex-end",classes:{root:s.commentsRoot},container:!0,justify:"space-between",children:[Object(a.jsx)(j.a,{item:!0,children:Object(a.jsx)(Gt,{onChange:L,value:z})}),Object(a.jsx)(j.a,{item:!0,children:Object(a.jsx)(Qt,{hasNextPage:g,hasPreviousPage:v,onFirstPage:w,onLastPage:P,onNextPage:k,onPreviousPage:S,page:x,pagesTotal:y,variant:"inlined"})}),C.map((function(e){return Object(a.jsx)(j.a,{item:!0,xs:12,children:Bt(e)},e.id)})),Object(a.jsx)("div",{children:"\u1cbc"}),Object(a.jsx)(j.a,{item:!0,children:Object(a.jsx)(Qt,{hasNextPage:g,hasPreviousPage:v,onFirstPage:w,onLastPage:P,onNextPage:k,onPreviousPage:S,page:x,pagesTotal:y,variant:"inlined"})})]})]})]})},mn=n(160),hn=n(385),fn=n(386),On=n(382),gn=n(401),vn=n(396),xn=n(384),yn=n(383);var wn=function(e){var t=e.room,n=Object(r.useState)(null),c=Object(O.a)(n,2),i=c[0],s=c[1],o=Object(r.useState)("room"),u=Object(O.a)(o,2),l=u[0],d=u[1],j=Object(a.jsx)(b.a,{p:2,children:Object(a.jsxs)(m.a,{children:["Share this code with your friends on Traktor:"," ",Object(a.jsx)(m.a,{color:"secondary",component:"span",display:"inline",children:t.key})]})}),p=Object(a.jsx)(f.a,{children:Object.keys(t.users).map((function(e){return Object(a.jsxs)(T.a,{children:[Object(a.jsx)(On.a,{children:Object(a.jsx)(gn.a,{component:b.a,height:32,width:32,children:e[0].toUpperCase()})}),Object(a.jsx)(V.a,{primary:e})]},e)}))});return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B.a,{title:"More information..",children:Object(a.jsx)(D.a,{color:"secondary",onClick:function(e){s(e.currentTarget)},children:Object(a.jsx)(yn.a,{})})}),Object(a.jsxs)(_.a,{anchorEl:i,onClose:function(){s(null)},open:Boolean(i),children:[Object(a.jsxs)(vn.a,{centered:!0,onChange:function(e,t){d(t)},value:l,children:[Object(a.jsx)(xn.a,{label:"Room",value:"room"}),Object(a.jsx)(xn.a,{label:"Users",value:"users"})]}),Object(a.jsx)(b.a,{width:320,children:"room"===l?j:p})]})]})};var Pn=function(e){var t=e.onLeave,n=e.onStart,r=e.room,c=r.owner.slug===nt();return Object(a.jsxs)(b.a,{bottom:0,display:"flex",height:80,justifyContent:"space-between",p:2,position:"absolute",width:"100%",children:[Object(a.jsx)(wn,{room:r}),c&&Object(a.jsx)(B.a,{title:"Start room",children:Object(a.jsx)("span",{children:Object(a.jsx)(D.a,{color:"secondary",disabled:Object.keys(r.users).length<=1||"started"===r.state,onClick:n,children:Object(a.jsx)(hn.a,{})})})}),Object(a.jsx)(B.a,{enterDelay:500,title:"Leave room",children:Object(a.jsx)(D.a,{color:"secondary",onClick:t,children:Object(a.jsx)(fn.a,{})})})]})},kn=n(74),Sn=n(387);var In=function(e){var t=e.onAgree,n=e.onDisagree,c=e.room,i=Object(r.useState)(0),s=Object(O.a)(i,2),o=s[0],u=s[1],l=Object(r.useState)(!1),d=Object(O.a)(l,2),j=d[0],p=d[1],h=o===c.items.length-1,f=c.items[o],g=it(f.type),v=f[f.type],x="/app/".concat(g,"/").concat(v.ids.slug),y=v.ids.tmdb,w=v.ids.slug,P=Te({entity:g,tmdbId:y,type:"poster"});return"lobby"===c.state?Object(a.jsx)(b.a,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",children:Object(a.jsxs)(m.a,{variant:"h3",children:["Waiting for ",c.owner.slug," to start.."]})}):j?Object(a.jsx)(b.a,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",children:Object(a.jsx)(m.a,{variant:"h3",children:"Waiting for results.."})}):Object(a.jsxs)(b.a,{display:"flex",height:"100%",children:[Object(a.jsx)(b.a,{component:kn.a,flex:1,onClick:function(){h?p(!0):u(o+1),n(w)},children:Object(a.jsx)(Sn.a,{color:"primary",fontSize:"large"})}),Object(a.jsx)(b.a,{component:"a",display:"contents",href:x,rel:"noreferrer",target:"_blank",children:Object(a.jsx)(b.a,{component:"img",height:"100%",src:P,width:"auto"})}),Object(a.jsx)(b.a,{component:kn.a,flex:1,onClick:function(){h?p(!0):u(o+1),t(w)},children:Object(a.jsx)(fe.a,{color:"secondary",fontSize:"large"})})]})},Cn=n(390),Nn=n(391),Rn=n(36),Wn=n(389),zn=n(388),Ln=n(398),Fn=n(161),Tn=n.n(Fn)()((function(e,t){$.a.get("/trakt/search/movie,show?query=".concat(e,"&limit=20")).then((function(e){return t(e.data)}))}),250);function Vn(e){var t=e.type;e=e[e.type];var n="".concat(Object(E.a)(t),": ").concat(e.title);return e.year&&(n+=" (".concat(e.year,")")),n}function En(e,t){return e[e.type].ids.slug===t[t.type].ids.slug}function Mn(e){return Object(a.jsx)(vt.a,Object(F.a)(Object(F.a)({},e),{},{placeholder:"Enter your query",size:"small",variant:"outlined"}))}var An=function(e){var t=e.onCreate,n=Object(r.useState)(!1),c=Object(O.a)(n,2),i=c[0],s=c[1],o=Object(r.useState)([]),u=Object(O.a)(o,2),l=u[0],d=u[1],j=Object(r.useState)(""),p=Object(O.a)(j,2),b=p[0],m=p[1],h=Object(r.useState)([]),f=Object(O.a)(h,2),g=f[0],v=f[1],x=l.length<2;function y(){d([]),s(!1)}return Object(r.useEffect)((function(){b?Tn(b,v):v([])}),[b]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(A.a,{color:"secondary",onClick:function(){s(!0)},startIcon:Object(a.jsx)(zn.a,{}),variant:"contained",children:"New room"}),Object(a.jsxs)(ft.a,{fullWidth:!0,maxWidth:"sm",onClose:y,open:i,children:[Object(a.jsx)(Ot.a,{children:"Search movies & shows"}),Object(a.jsx)(gt.a,{children:Object(a.jsx)(Ln.a,{filterSelectedOptions:!0,getOptionLabel:Vn,getOptionSelected:En,inputValue:b,multiple:!0,onChange:function(e,t){d(t)},onInputChange:function(e,t){m(t)},options:[].concat(Object(Rn.a)(g),Object(Rn.a)(l)),renderInput:Mn,value:l})}),Object(a.jsxs)(Wn.a,{children:[Object(a.jsx)(A.a,{onClick:y,children:"Close"}),Object(a.jsx)(A.a,{color:"secondary",disabled:x,onClick:function(){y(),t(l)},children:"Create room"})]})]})]})};var Bn=function(e){var t=e.onCreate,n=e.onJoin,c=Object(r.useState)(""),i=Object(O.a)(c,2),s=i[0],o=i[1];return Object(a.jsxs)(b.a,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",children:[Object(a.jsx)(b.a,{mr:1,children:Object(a.jsx)(An,{onCreate:t})}),Object(a.jsx)(b.a,{mr:1,children:Object(a.jsx)(vt.a,{InputProps:{startAdornment:Object(a.jsx)(Cn.a,{position:"start",children:Object(a.jsx)(Nn.a,{})})},onChange:function(e){var t=e.target.value;o(t)},placeholder:"Enter room code",size:"small",value:s,variant:"outlined"})}),Object(a.jsx)(A.a,{color:"secondary",disabled:!s,onClick:function(){n(s),o("")},children:"Join"})]})},Dn=n(392);var _n=function(e){var t=e.match,n=e.onClose,r=null!==t;function c(){n()}if(!r)return null;if("boolean"===typeof t)return Object(a.jsxs)(ft.a,{fullWidth:!0,maxWidth:"sm",onClose:c,open:r,children:[Object(a.jsx)(Ot.a,{children:"No match!"}),Object(a.jsx)(gt.a,{children:Object(a.jsx)(Dn.a,{children:"Unfortunately, there was no match. Try again!"})})]});var i=t[t.type],s=it(t.type),o="/app/".concat(s,"/").concat(i.ids.slug),u=function(e){var t=e.entity,n=e.season,a=e.size,r=e.tmdbId,c=e.type;if(t=ct(t),!r)return"/images/placeholder.png";var i="/images/".concat(t,"/").concat(r,"/").concat(c,"?");return void 0!==n&&(i+="season=".concat(n)),a&&(i+="size=".concat(a)),i}({entity:it(t.type),tmdbId:t[t.type].ids.tmdb,type:"poster"});return Object(a.jsxs)(ft.a,{fullWidth:!0,maxWidth:"sm",onClose:c,open:r,children:[Object(a.jsxs)(Ot.a,{children:["There is a match!"," ",Object(a.jsx)(b.a,{color:"secondary",component:d.b,to:o,children:t[t.type].title})," ","with ",t.agreedBy.length," votes"]}),Object(a.jsx)(gt.a,{children:Object(a.jsx)(d.b,{to:o,children:Object(a.jsx)(b.a,{component:"img",src:u,width:"100%"})})})]})};var qn=function(){var e=Object(u.b)(),t=Object(r.useState)(null),n=Object(O.a)(t,2),c=n[0],i=n[1],s=Object(r.useState)(null),o=Object(O.a)(s,2),l=o[0],d=o[1],j=Object(r.useState)(null),p=Object(O.a)(j,2),m=p[0],h=p[1];return Object(r.useEffect)((function(){var t=Object(mn.io)();return i(t),t.on("roomCreated",d),t.on("roomStarted",d),t.on("roomDisbanded",(function(t){e(S(t)),d(null)})),t.on("matchFound",(function(e){h(e),d(null)})),t.on("matchNotFound",(function(){h(!1),d(null)})),t.on("roomLeft",(function(){return d(null)})),t.on("userJoined",d),t.on("userLeft",d),t.on("error",(function(t){return e(S(t))})),function(){t.close()}}),[e]),Object(a.jsxs)(b.a,{height:"100vh",position:"relative",children:[Object(a.jsx)(_n,{match:m,onClose:function(){h(null)}}),!l&&Object(a.jsx)(Bn,{onCreate:function(e){c.emit("createRoom",e)},onJoin:function(e){c.emit("joinRoom",e)}}),l&&Object(a.jsxs)(b.a,{height:"calc(100% - 80px)",children:[Object(a.jsx)(In,{onAgree:function(e){c.emit("agree",{itemSlug:e,roomKey:l.key})},onDisagree:function(e){c.emit("disagree",{itemSlug:e,roomKey:l.key})},room:l}),Object(a.jsx)(Pn,{onLeave:function(){c.emit("leaveRoom",l.key)},onStart:function(){c.emit("startRoom",l.key)},room:l})]})]})},Gn=Object(z.a)((function(e){return{buttons:{"& > *:not(last-child)":{marginBottom:e.spacing(1)}},content:{"& > *:not(:last-child)":{marginBottom:e.spacing(2)},marginLeft:342,paddingLeft:e.spacing(2)},facts:{display:"flex",flexWrap:"wrap"},factsItem:{"& > :first-child":{marginRight:e.spacing(1)},marginBottom:e.spacing(1),marginRight:e.spacing(2),whiteSpace:"nowrap"},fixedColumn:{position:"fixed",width:342},root:{padding:e.spacing(2),position:"relative"}}})),Un=[["Overview","#overview"],["Actors","#actors"],["Comments","#comments"],["Related","#related"]];var Jn=function(){var e,t,n,c,i,s,o,p=Gn(),b=Object(u.b)(),g=Object(l.j)().slug,v=Object(u.c)(ln);return Object(r.useEffect)((function(){b(an(g))}),[b,g]),Object(a.jsxs)("div",{className:p.root,children:[Object(a.jsxs)("div",{className:p.fixedColumn,children:[Object(a.jsx)(Ee,{entity:"movies",slug:g,tmdbId:null===(e=v.summary)||void 0===e?void 0:e.ids.tmdb}),Object(a.jsx)(f.a,{children:Un.map((function(e){var t=Object(O.a)(e,2),n=t[0],c=t[1];return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(T.a,{button:!0,component:"a",href:c,children:Object(a.jsx)(V.a,{children:n})}),Object(a.jsx)(h.a,{})]},c)}))}),Object(a.jsxs)("div",{className:p.buttons,children:[Object(a.jsx)(me,{entity:"movies",slug:g}),Object(a.jsx)(Fe,{entity:"movies",slug:g}),Object(a.jsx)(ke,{entity:"movies",slug:g}),Object(a.jsx)(Ye,{entity:"movies",slug:g})]})]}),Object(a.jsxs)("div",{className:p.content,children:[Object(a.jsxs)("div",{id:"overview",children:[Object(a.jsxs)(m.a,{display:"inline",variant:"h4",children:[null===(t=v.summary)||void 0===t?void 0:t.title," "]}),Object(a.jsx)(m.a,{color:"textSecondary",display:"inline",variant:"h5",children:null===(n=v.summary)||void 0===n?void 0:n.year})]}),Object(a.jsx)("div",{className:p.facts,children:et(v).map((function(e){var t=Object(O.a)(e,2),n=t[0],r=t[1];return Object(a.jsxs)("span",{className:p.factsItem,children:[Object(a.jsx)(m.a,{color:"textSecondary",display:"inline",variant:"body2",children:n}),Object(a.jsx)(m.a,{display:"inline",variant:"body2",children:r})]},n)}))}),Object(a.jsxs)(m.a,{variant:"body2",children:[Object(a.jsxs)("i",{children:[null===(c=v.summary)||void 0===c?void 0:c.tagline," "]}),null===(i=v.summary)||void 0===i?void 0:i.overview]}),Object(a.jsx)(m.a,{id:"actors",variant:"h5",children:"Actors"}),Object(a.jsx)(j.a,{container:!0,spacing:1,style:{overflow:"auto"},wrap:"nowrap",children:null===(s=v.people)||void 0===s?void 0:s.cast.map((function(e){var t=e.character,n=e.person;return Object(a.jsx)(j.a,{item:!0,style:{flex:"0 0 128px"},children:Object(a.jsxs)(Ee,{entity:"people",size:"small",slug:n.ids.slug,tmdbId:n.ids.tmdb,children:[Object(a.jsxs)(m.a,{color:"textSecondary",variant:"caption",children:[n.name," "]}),Object(a.jsx)(m.a,{variant:"caption",children:t})]})},n.name)}))}),Object(a.jsxs)(j.a,{container:!0,direction:"column",spacing:1,children:[Object(a.jsxs)(j.a,{alignItems:"center",container:!0,item:!0,justify:"space-between",xs:12,children:[Object(a.jsx)(m.a,{id:"comments",variant:"h5",children:"Comments"}),Object(a.jsxs)(A.a,{color:"secondary",component:d.b,size:"small",to:"comments",variant:"outlined",children:["All ",null===(o=v.stats)||void 0===o?void 0:o.comments," comments"]})]}),v.comments.map((function(e){return Object(a.jsx)(j.a,{item:!0,xs:12,children:Bt(e)},e.id)}))]}),Object(a.jsx)(m.a,{id:"related",variant:"h5",children:"Related"}),Object(a.jsx)(j.a,{container:!0,spacing:1,children:v.related.map((function(e){return Object(a.jsx)(j.a,{item:!0,xs:2,children:Object(a.jsx)(Qe,{entity:"movies",overallRating:ot(e.rating,0),primary:e.title,secondary:e.year,slug:e.ids.slug,tmdbId:e.ids.tmdb})},e.ids.slug)}))})]})]})},Kn=Object(g.a)((function(e){return e.movies.entities}),(function(e){return e})),Hn=Object(g.a)((function(e){return e.movies.pagination.total}),(function(e){return e})),Yn=Object(x.b)("movies/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i,s,o,u;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.category,r=t.limit,c=void 0===r?$e:r,i=t.page,s=void 0===i?1:i,o=n.rejectWithValue,e.prev=2,e.next=5,$.a.get("/trakt/movies/".concat(a,"?page=").concat(s,"&limit=").concat(c,"&extended=full"));case 5:return u=e.sent,"popular"===a&&(u.data=u.data.map((function(e){return{movie:e}}))),e.abrupt("return",{entities:u.data,total:parseInt(u.headers["x-pagination-page-count"])});case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",o(e.t0.toString()));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}()),Qn=Object(x.c)({extraReducers:Object(Q.a)({},Yn.fulfilled,(function(e,t){e.entities=t.payload.entities,e.pagination.total=t.payload.total})),initialState:{entities:[],pagination:{total:0}},name:"movies",reducers:{}}).reducer;function Xn(e){var t=e.category,n=e.movies;switch(t){case"trending":return function(e){return e.map((function(e){var t=e.movie,n=e.watchers,r=void 0===n?0:n,c=[];return r&&c.push("".concat(r," people watching")),Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Qe,{chips:c,entity:"movies",overallRating:ot(t.rating,0),primary:t.title,secondary:t.year,slug:t.ids.slug,tmdbId:t.ids.tmdb})},t.ids.trakt)}))}(n);case"popular":return function(e){return e.map((function(e){var t=e.movie;return Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Qe,{entity:"movies",overallRating:ot(t.rating,0),primary:t.title,secondary:t.year,slug:t.ids.slug,tmdbId:t.ids.tmdb})},t.ids.trakt)}))}(n);case"recommended":return function(e){return e.map((function(e){var t=e.movie,n=e.user_count,r=void 0===n?0:n,c=[];return r&&c.push("".concat(r," people")),Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Qe,{chips:c,entity:"movies",overallRating:ot(t.rating,0),primary:t.title,secondary:t.year,slug:t.ids.slug,tmdbId:t.ids.tmdb})},t.ids.trakt)}))}(n);case"watched":return function(e){return e.map((function(e){var t=e.movie,n=e.play_count,r=void 0===n?0:n,c=e.watcher_count,i=void 0===c?0:c,s=[];return r&&s.push("".concat(r," plays")),i&&s.push("".concat(i," watches")),Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Qe,{chips:s,entity:"movies",overallRating:ot(t.rating,0),primary:t.title,secondary:t.year,slug:t.ids.slug,tmdbId:t.ids.tmdb})},t.ids.trakt)}))}(n);case"anticipated":return function(e){return e.map((function(e){var t=e.list_count,n=void 0===t?0:t,r=e.movie,c=[];return n&&c.push("In ".concat(n," lists")),Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Qe,{chips:c,entity:"movies",overallRating:ot(r.rating,0),primary:r.title,secondary:r.year,slug:r.ids.slug,tmdbId:r.ids.tmdb})},r.ids.trakt)}))}(n);default:return null}}var Zn=function(e){var t=e.category,n=Object(u.b)(),c=en(Hn),i=c.hasNextPage,s=c.hasPreviousPage,o=c.page,l=c.pagesTotal,d=c.toFirstPage,p=c.toLastPage,b=c.toNextPage,m=c.toPreviousPage,h=Object(u.c)(Kn);return Object(r.useEffect)((function(){n(Yn({category:t,page:o}))}),[t,n,o]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.a,{container:!0,children:Xn({category:t,movies:h})}),Object(a.jsx)(Qt,{hasNextPage:i,hasPreviousPage:s,onFirstPage:d,onLastPage:p,onNextPage:b,onPreviousPage:m,page:o,pagesTotal:l})]})},$n=Object(g.a)((function(e){return e.person}),(function(e){return e})),ea=Object(x.b)("person/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i,s,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,Promise.all([$.a.get("/trakt/people/".concat(t,"?extended=full")),$.a.get("/trakt/people/".concat(t,"/movies?extended=full")),$.a.get("/trakt/people/".concat(t,"/shows?extended=full"))]);case 4:return r=e.sent,c=Object(O.a)(r,3),i=c[0],s=c[1],o=c[2],e.abrupt("return",{movies:s.data,shows:o.data,summary:i.data});case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",a(e.t0.toString()));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()),ta=Object(x.c)({extraReducers:Object(Q.a)({},ea.fulfilled,(function(e,t){return t.payload})),initialState:{movies:[],shows:[],summary:null},name:"person",reducers:{}}).reducer,na=Object(z.a)((function(e){return{buttons:{"& > *:not(last-child)":{marginBottom:e.spacing(1)}},content:{"& > *:not(:last-child)":{marginBottom:e.spacing(2)},marginLeft:342,paddingLeft:e.spacing(2)},facts:{display:"flex",flexWrap:"wrap"},factsItem:{"& > :first-child":{marginRight:e.spacing(1)},marginBottom:e.spacing(1),marginRight:e.spacing(2),whiteSpace:"nowrap"},fixedColumn:{position:"fixed",width:342},root:{padding:e.spacing(2),position:"relative"}}})),aa=[["Overview","#overview"],["Movies","#movies"],["Shows","#shows"]];function ra(e){if(!e)return[];var t=e.summary;return[["Birthplace",null===t||void 0===t?void 0:t.birthplace],["Birthday",new Date(null===t||void 0===t?void 0:t.birthday).toLocaleDateString("da-Dk")]]}var ca=function(){var e,t,n,c,i,s,o,d=na(),p=Object(u.b)(),b=Object(l.j)().slug,g=Object(u.c)($n);return Object(r.useEffect)((function(){p(ea(b))}),[p,b]),Object(a.jsxs)("div",{className:d.root,children:[Object(a.jsxs)("div",{className:d.fixedColumn,children:[Object(a.jsx)(Ee,{entity:"people",slug:b,tmdbId:null===(e=g.summary)||void 0===e?void 0:e.ids.tmdb}),Object(a.jsx)(f.a,{children:aa.map((function(e){var t=Object(O.a)(e,2),n=t[0],c=t[1];return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(T.a,{button:!0,component:"a",href:c,children:Object(a.jsx)(V.a,{children:n})}),Object(a.jsx)(h.a,{})]},c)}))}),Object(a.jsx)("div",{className:d.buttons,children:Object(a.jsx)(me,{entity:"people",slug:b})})]}),Object(a.jsxs)("div",{className:d.content,children:[Object(a.jsx)("div",{id:"overview",children:Object(a.jsx)(m.a,{display:"inline",variant:"h4",children:null===(t=g.summary)||void 0===t?void 0:t.name})}),Object(a.jsx)("div",{className:d.facts,children:ra(g).map((function(e){var t=Object(O.a)(e,2),n=t[0],r=t[1];return Object(a.jsxs)("span",{className:d.factsItem,children:[Object(a.jsx)(m.a,{color:"textSecondary",display:"inline",variant:"body2",children:n}),Object(a.jsx)(m.a,{display:"inline",variant:"body2",children:r})]},n)}))}),Object(a.jsx)(m.a,{variant:"body2",children:null===(n=g.summary)||void 0===n?void 0:n.biography}),Object(a.jsx)(m.a,{id:"movies",variant:"h5",children:"Movies"}),Object(a.jsx)(j.a,{container:!0,spacing:1,children:null===(c=g.movies)||void 0===c||null===(i=c.cast)||void 0===i?void 0:i.map((function(e){var t=e.character,n=e.movie;return Object(a.jsx)(j.a,{item:!0,xs:2,children:Object(a.jsx)(Qe,{entity:"movies",overallRating:ot(n.rating,0),primary:n.title,secondary:n.year,slug:n.ids.slug,tmdbId:n.ids.tmdb,children:Object(a.jsx)(m.a,{variant:"caption",children:t})})},n.ids.slug)}))}),Object(a.jsx)(m.a,{id:"shows",variant:"h5",children:"Shows"}),Object(a.jsx)(j.a,{container:!0,spacing:1,children:null===(s=g.shows)||void 0===s||null===(o=s.cast)||void 0===o?void 0:o.map((function(e){var t=e.character,n=e.show;return Object(a.jsx)(j.a,{item:!0,xs:2,children:Object(a.jsx)(Qe,{entity:"shows",overallRating:ot(n.rating,0),primary:n.title,secondary:n.year,slug:n.ids.slug,tmdbId:n.ids.tmdb,children:Object(a.jsx)(m.a,{variant:"caption",children:t})})},n.ids.slug)}))})]})]})},ia=Object(g.a)((function(e){return e.search.entities}),(function(e){return e})),sa=Object(g.a)((function(e){return e.search.pagination.total}),(function(e){return e})),oa=Object(x.b)("search/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i,s,o,u,l;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.entity,r=t.limit,c=void 0===r?$e:r,i=t.page,s=void 0===i?1:i,o=t.query,u=n.rejectWithValue,e.prev=2,a=ct(a),e.next=6,$.a.get("/trakt/search/".concat(a,"?query=").concat(o,"&page=").concat(s,"&limit=").concat(c,"?extended=full"));case 6:return l=e.sent,e.abrupt("return",{entities:l.data,total:parseInt(l.headers["x-pagination-page-count"])});case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",u(e.t0.toString()));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}()),ua=Object(x.c)({extraReducers:Object(Q.a)({},oa.fulfilled,(function(e,t){e.entities=t.payload.entities,e.pagination.total=t.payload.total})),initialState:{entities:[],pagination:{total:0}},name:"search",reducers:{}}).reducer;var la=function(e){var t=e.entity,n=Object(u.b)(),c=en(sa),i=c.hasNextPage,s=c.hasPreviousPage,o=c.page,l=c.pagesTotal,p=c.toFirstPage,m=c.toLastPage,h=c.toNextPage,f=c.toPreviousPage,g=Object(d.d)(),v=Object(O.a)(g,2),x=v[0],y=v[1],w=Object(r.useMemo)((function(){return Object.fromEntries(x)}),[x]).query,P=void 0===w?"":w,k=Object(u.c)(ia);return Object(r.useEffect)((function(){n(oa({entity:t,page:o,query:P}))}),[n,t,o,P]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(b.a,{m:2,children:Object(a.jsx)(vt.a,{color:"secondary",defaultValue:P,label:"What are you looking for?",onKeyDown:function(e){13===e.keyCode&&y({query:e.target.value})},size:"small",variant:"outlined"})}),Object(a.jsx)(j.a,{container:!0,children:k.map((function(e){return at({item:e,WrapperComponent:j.a,WrapperProps:{item:!0,lg:2,md:3,sm:6,xs:12}})}))}),Object(a.jsx)(Qt,{hasNextPage:i,hasPreviousPage:s,onFirstPage:p,onLastPage:m,onNextPage:h,onPreviousPage:f,page:o,pagesTotal:l})]})},da=Object(z.a)((function(e){return{buttons:{"& > *:not(last-child)":{marginBottom:e.spacing(1)}},content:{"& > *:not(:last-child)":{marginBottom:e.spacing(2)},marginLeft:342,paddingLeft:e.spacing(2)},facts:{display:"flex",flexWrap:"wrap"},factsItem:{"& > :first-child":{marginRight:e.spacing(1)},marginBottom:e.spacing(1),marginRight:e.spacing(2),whiteSpace:"nowrap"},fixedColumn:{position:"fixed",width:342},root:{padding:e.spacing(2),position:"relative"}}})),ja=[["Overview","#overview"],["Actors","#actors"],["Seasons","#seasons"],["Comments","#comments"],["Related","#related"]];var pa=function(){var e,t,n,c,i,s,o,p=da(),b=Object(u.b)(),g=Object(l.j)().slug,v=Object(u.c)(dn);return Object(r.useEffect)((function(){b(cn(g))}),[b,g]),Object(a.jsxs)("div",{className:p.root,children:[Object(a.jsxs)("div",{className:p.fixedColumn,children:[Object(a.jsx)(Ee,{entity:"shows",slug:g,tmdbId:null===(e=v.summary)||void 0===e?void 0:e.ids.tmdb}),Object(a.jsx)(f.a,{children:ja.map((function(e){var t=Object(O.a)(e,2),n=t[0],c=t[1];return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(T.a,{button:!0,component:"a",href:c,children:Object(a.jsx)(V.a,{children:n})}),Object(a.jsx)(h.a,{})]},c)}))}),Object(a.jsxs)("div",{className:p.buttons,children:[Object(a.jsx)(me,{entity:"shows",slug:g}),Object(a.jsx)(Fe,{entity:"shows",slug:g}),Object(a.jsx)(ke,{entity:"shows",slug:g}),Object(a.jsx)(Ye,{entity:"shows",slug:g})]})]}),Object(a.jsxs)("div",{className:p.content,children:[Object(a.jsxs)("div",{id:"overview",children:[Object(a.jsxs)(m.a,{display:"inline",variant:"h4",children:[null===(t=v.summary)||void 0===t?void 0:t.title," "]}),Object(a.jsx)(m.a,{color:"textSecondary",display:"inline",variant:"h5",children:null===(n=v.summary)||void 0===n?void 0:n.year})]}),Object(a.jsx)("div",{className:p.facts,children:et(v).map((function(e){var t=Object(O.a)(e,2),n=t[0],r=t[1];return Object(a.jsxs)("span",{className:p.factsItem,children:[Object(a.jsx)(m.a,{color:"textSecondary",display:"inline",variant:"body2",children:n}),Object(a.jsx)(m.a,{display:"inline",variant:"body2",children:r})]},n)}))}),Object(a.jsxs)(m.a,{variant:"body2",children:[Object(a.jsxs)("i",{children:[null===(c=v.summary)||void 0===c?void 0:c.tagline," "]}),null===(i=v.summary)||void 0===i?void 0:i.overview]}),Object(a.jsx)(m.a,{id:"actors",variant:"h5",children:"Actors"}),Object(a.jsx)(j.a,{container:!0,spacing:1,style:{overflow:"auto"},wrap:"nowrap",children:null===(s=v.people)||void 0===s?void 0:s.cast.map((function(e){var t=e.character,n=e.person;return Object(a.jsx)(j.a,{item:!0,style:{flex:"0 0 128px"},children:Object(a.jsxs)(Ee,{entity:"people",size:"small",slug:n.ids.slug,tmdbId:n.ids.tmdb,children:[Object(a.jsxs)(m.a,{color:"textSecondary",variant:"caption",children:[n.name," "]}),Object(a.jsx)(m.a,{variant:"caption",children:t})]})},n.name)}))}),Object(a.jsx)(m.a,{id:"seasons",variant:"h5",children:"Seasons"}),Object(a.jsx)(j.a,{container:!0,spacing:1,children:v.seasons.map((function(e){var t,n,r;return Object(a.jsx)(j.a,{item:!0,xs:2,children:Object(a.jsxs)(Ee,{entity:"shows",season:e.number,slug:null===(t=v.summary)||void 0===t?void 0:t.ids.slug,tmdbId:null===(n=v.summary)||void 0===n?void 0:n.ids.tmdb,children:[Object(a.jsxs)(m.a,{variant:"body2",children:[0===e.number?"Specials":"Season ".concat(e.number)," "]}),Object(a.jsxs)(m.a,{color:"textSecondary",variant:"caption",children:[(null===(r=e.episodes)||void 0===r?void 0:r.length)||0," episodes"]})]})},e.number)}))}),Object(a.jsxs)(j.a,{container:!0,spacing:1,children:[Object(a.jsxs)(j.a,{alignItems:"center",container:!0,item:!0,justify:"space-between",xs:12,children:[Object(a.jsx)(m.a,{id:"comments",variant:"h5",children:"Comments"}),Object(a.jsxs)(A.a,{color:"secondary",component:d.b,size:"small",to:"comments",variant:"outlined",children:["All ",null===(o=v.stats)||void 0===o?void 0:o.comments," comments"]})]}),v.comments.map((function(e){return Object(a.jsx)(j.a,{item:!0,xs:12,children:Bt(e)},e.id)}))]}),Object(a.jsx)(m.a,{id:"related",variant:"h5",children:"Related"}),Object(a.jsx)(j.a,{container:!0,spacing:1,children:v.related.map((function(e){return Object(a.jsx)(j.a,{item:!0,xs:2,children:Object(a.jsx)(Qe,{entity:"shows",overallRating:ot(e.rating,0),primary:e.title,secondary:e.year,slug:e.ids.slug,tmdbId:e.ids.tmdb})},e.ids.slug)}))})]})]})},ba=Object(g.a)((function(e){return e.shows.entities}),(function(e){return e})),ma=Object(g.a)((function(e){return e.shows.pagination.total}),(function(e){return e})),ha=Object(x.b)("shows/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i,s,o,u;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.category,r=t.limit,c=void 0===r?$e:r,i=t.page,s=void 0===i?1:i,o=n.rejectWithValue,e.prev=2,e.next=5,$.a.get("/trakt/shows/".concat(a,"?page=").concat(s,"&limit=").concat(c,"&extended=full"));case 5:return u=e.sent,"popular"===a&&(u.data=u.data.map((function(e){return{show:e}}))),e.abrupt("return",{entities:u.data,total:parseInt(u.headers["x-pagination-page-count"])});case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",o(e.t0.toString()));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}()),fa=Object(x.c)({extraReducers:Object(Q.a)({},ha.fulfilled,(function(e,t){e.entities=t.payload.entities,e.pagination.total=t.payload.total})),initialState:{entities:[],pagination:{total:0}},name:"shows",reducers:{}}).reducer;function Oa(e){var t=e.category,n=e.shows;switch(t){case"trending":return function(e){return e.map((function(e){var t=e.show,n=e.watchers,r=void 0===n?0:n,c=[];return r&&c.push("".concat(r," people watching")),Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Qe,{chips:c,entity:"shows",overallRating:ot(t.rating,0),primary:t.title,secondary:t.year,slug:t.ids.slug,tmdbId:t.ids.tmdb})},t.ids.trakt)}))}(n);case"popular":return function(e){return e.map((function(e){var t=e.show;return Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Qe,{entity:"shows",overallRating:ot(t.rating,0),primary:t.title,secondary:t.year,slug:t.ids.slug,tmdbId:t.ids.tmdb})},t.ids.trakt)}))}(n);case"recommended":return function(e){return e.map((function(e){var t=e.show,n=e.user_count,r=void 0===n?0:n,c=[];return r&&c.push("".concat(r," people")),Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Qe,{chips:c,entity:"shows",overallRating:ot(t.rating,0),primary:t.title,secondary:t.year,slug:t.ids.slug,tmdbId:t.ids.tmdb})},t.ids.trakt)}))}(n);case"watched":return function(e){return e.map((function(e){var t=e.play_count,n=void 0===t?0:t,r=e.show,c=e.watcher_count,i=void 0===c?0:c,s=[];return n&&s.push("".concat(n," plays")),i&&s.push("".concat(i," watches")),Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Qe,{chips:s,entity:"shows",overallRating:ot(r.rating,0),primary:r.title,secondary:r.year,slug:r.ids.slug,tmdbId:r.ids.tmdb})},r.ids.trakt)}))}(n);case"anticipated":return function(e){return e.map((function(e){var t=e.list_count,n=void 0===t?0:t,r=e.show,c=[];return n&&c.push("In ".concat(n," lists")),Object(a.jsx)(j.a,{item:!0,lg:2,md:3,sm:6,xs:12,children:Object(a.jsx)(Qe,{chips:c,entity:"shows",overallRating:ot(r.rating,0),primary:r.title,secondary:r.year,slug:r.ids.slug,tmdbId:r.ids.tmdb})},r.ids.trakt)}))}(n);default:return null}}var ga,va=function(e){var t=e.category,n=Object(u.b)(),c=en(ma),i=c.hasNextPage,s=c.hasPreviousPage,o=c.page,l=c.pagesTotal,d=c.toFirstPage,p=c.toLastPage,b=c.toNextPage,m=c.toPreviousPage,h=Object(u.c)(ba);return Object(r.useEffect)((function(){n(ha({category:t,page:o}))}),[t,n,o]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.a,{container:!0,children:Oa({category:t,shows:h})}),Object(a.jsx)(Qt,{hasNextPage:i,hasPreviousPage:s,onFirstPage:d,onLastPage:p,onNextPage:b,onPreviousPage:m,page:o,pagesTotal:l})]})},xa=Object(g.a)((function(e){return e.users.comments.entities}),(function(e){return e})),ya=Object(g.a)((function(e){return e.users.comments.pagination.total}),(function(e){return e})),wa=Object(x.b)("users/comments/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i,s,o,u;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.limit,r=void 0===a?Ze:a,c=t.page,i=void 0===c?1:c,s=t.userSlug,o=n.rejectWithValue,e.prev=2,e.next=5,$.a.get("/trakt/users/".concat(s,"/comments/all/movies,shows?page=").concat(i,"&limit=").concat(r));case 5:return u=e.sent,e.abrupt("return",{entities:tt(u.data),total:parseInt(u.headers["x-pagination-page-count"])});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",o(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()),Pa=Object(x.c)({extraReducers:(ga={},Object(Q.a)(ga,wa.fulfilled,(function(e,t){e.entities=t.payload.entities,e.pagination.total=t.payload.total})),Object(Q.a)(ga,Vt.fulfilled,(function(e,t){var n=t.meta.arg,a=e.entities.findIndex((function(e){return e.comment.id===n}));-1!==a&&e.entities.splice(a,1)})),Object(Q.a)(ga,Et.fulfilled,(function(e,t){var n=e.entities.findIndex((function(e){return e.comment.id===t.payload.id}));-1!==n&&(e.entities[n].comment=t.payload)})),ga),initialState:{entities:[],pagination:{total:0}},name:"users/comments",reducers:{}}).reducer;var ka=function(){var e=Object(u.b)(),t=Object(l.j)().userSlug,n=Object(u.c)(xa),c=en(ya),i=c.hasNextPage,s=c.hasPreviousPage,o=c.page,d=c.pagesTotal,p=c.toFirstPage,m=c.toLastPage,h=c.toNextPage,f=c.toPreviousPage;return Object(r.useEffect)((function(){e(wa({page:o,userSlug:t}))}),[e,o,t]),n.length?Object(a.jsxs)(b.a,{p:2,children:[!n.length&&"No comments found",Object(a.jsx)(j.a,{container:!0,direction:"column",spacing:2,children:n.map((function(e){return Object(a.jsxs)(j.a,{container:!0,item:!0,spacing:2,children:[Object(a.jsx)(j.a,{item:!0,style:{width:220},children:at({item:e})}),Object(a.jsx)(j.a,{item:!0,xs:!0,children:Bt(e.comment)})]},e.comment.id)}))}),d>1&&Object(a.jsx)(Qt,{hasNextPage:i,hasPreviousPage:s,onFirstPage:p,onLastPage:m,onNextPage:h,onPreviousPage:f,page:o,pagesTotal:d,variant:"wrapped"})]}):"No comments found"},Sa=Object(g.a)((function(e){return e.app.feed}),(function(e){return e}));function Ia(e){var t=e.type,n=e.feed,r=e[t];switch(n.type){case"ratings":return Object(a.jsxs)(m.a,{children:["User"," ",Object(a.jsxs)(m.a,{color:"secondary",component:d.b,to:"/app/users/".concat(n.userSlug),children:["@",n.userSlug]})," ","rated"," ",Object(a.jsx)(m.a,{color:"secondary",component:d.b,to:"/app/".concat(n.entity,"/").concat(n.slug),children:r.title})," ","with ",n.payload.rating," \u2764\ufe0f"]});case"recommendations":return Object(a.jsxs)(m.a,{children:["User"," ",Object(a.jsxs)(m.a,{color:"secondary",component:d.b,to:"/app/users/".concat(n.userSlug),children:["@",n.userSlug]})," ","recommended"," ",Object(a.jsx)(m.a,{color:"secondary",component:d.b,to:"/app/".concat(n.entity,"/").concat(n.slug),children:r.title})]});case"watchlist":return Object(a.jsxs)(m.a,{children:["User"," ",Object(a.jsxs)(m.a,{color:"secondary",component:d.b,to:"/app/users/".concat(n.userSlug),children:["@",n.userSlug]})," ","added"," ",Object(a.jsx)(m.a,{color:"secondary",component:d.b,to:"/app/".concat(n.entity,"/").concat(n.slug),children:r.title})," ","to his/her watchlist"]});default:return""}}var Ca,Na=function(){var e=Object(l.j)().userSlug,t=Object(u.c)(Sa);return e!==nt()?Object(a.jsx)(l.a,{to:"/app/users/".concat(e,"/ratings")}):Object(a.jsxs)(b.a,{p:2,children:[!t.length&&"No feed found. Start following users!",Object(a.jsx)(j.a,{container:!0,direction:"column",spacing:2,children:t.map((function(e){return Object(a.jsxs)(j.a,{container:!0,item:!0,spacing:2,children:[Object(a.jsx)(j.a,{item:!0,style:{width:220},children:at({item:e})}),Object(a.jsx)(j.a,{item:!0,xs:!0,children:Object(a.jsx)(Ct.a,{component:b.a,p:2,children:Ia(e)})})]},e.uuid)}))})]})},Ra=(Object(g.a)((function(e){return e.users.list.summary}),(function(e){return e})),Object(g.a)((function(e){return e.users.list.items.entities}),(function(e){return e}))),Wa=Object(g.a)((function(e){return e.users.list.items.pagination.total}),(function(e){return e})),za=Object(x.b)("users/list/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,r=t.userSlug,c=n.rejectWithValue,e.prev=2,e.next=5,$.a.get("/trakt/users/".concat(r,"/lists/").concat(a));case 5:return i=e.sent,e.abrupt("return",i.data);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",c(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()),La=Object(x.b)("users/list/items/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i,s,o,u,l;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,r=t.limit,c=void 0===r?Ze:r,i=t.page,s=void 0===i?1:i,o=t.userSlug,u=n.rejectWithValue,e.prev=2,e.next=5,$.a.get("/trakt/users/".concat(o,"/lists/").concat(a,"/items?extended=full&page=").concat(s,"&limit=").concat(c));case 5:return l=e.sent,e.abrupt("return",{entities:tt(l.data),total:parseInt(l.headers["x-pagination-page-count"])});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",u(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}());var Fa=Object(x.c)({extraReducers:(Ca={},Object(Q.a)(Ca,za.fulfilled,(function(e,t){e.summary=t.payload})),Object(Q.a)(Ca,La.fulfilled,(function(e,t){e.items.entities=t.payload.entities,e.items.pagination.total=t.payload.total})),Ca),initialState:{items:{entities:[],pagination:{total:0}},summary:null},name:"list",reducers:{}}).reducer;var Ta=function(){var e=Object(l.j)(),t=e.id,n=e.userSlug,c=Object(u.b)(),i=Object(u.c)(Ra),s=en(Wa),o=s.hasNextPage,d=s.hasPreviousPage,p=s.page,m=s.pagesTotal,h=s.toFirstPage,f=s.toLastPage,O=s.toNextPage,g=s.toPreviousPage;return Object(r.useEffect)((function(){c(La({id:t,page:p,userSlug:n}))}),[c,t,p,n]),Object(a.jsxs)(b.a,{p:2,children:[!i.length&&"No items to display",Object(a.jsx)(j.a,{container:!0,spacing:1,children:i.map((function(e){return at({item:e,WrapperComponent:j.a,WrapperProps:{item:!0,xs:2}})}))}),m>1&&Object(a.jsx)(Qt,{hasNextPage:o,hasPreviousPage:d,onFirstPage:h,onLastPage:f,onNextPage:O,onPreviousPage:g,page:p,pagesTotal:m,variant:"wrapped"})]})};var Va=function(e){var t=e.description,n=e.listSlug,c=e.name,i=e.privacy,s=e.username,o=e.userSlug,l=Object(r.useMemo)(pe,[]),p=Object(u.b)(),h=Object(u.c)((function(e){return l(e,["actions/lists/update","actions/lists/remove"])})),f=Object(r.useState)(null),g=Object(O.a)(f,2),v=g[0],x=g[1],y=nt()===o,w="editing"===v,P="removing"===v,k=[Object(a.jsx)(m.a,{display:"inline",variant:"subtitle1",children:Object(a.jsx)(d.b,{to:"/app/users/".concat(o,"/lists/").concat(n),children:c})},"".concat(s,"-").concat(n,"-label-0")),Object(a.jsxs)(m.a,{display:"inline",variant:"body2",children:[" ","by ",Object(a.jsx)(d.b,{to:"/app/users/".concat(o),children:s})]},"".concat(s,"-").concat(n,"-label-1"))];return Object(a.jsxs)(a.Fragment,{children:[(w||P)&&h&&Object(a.jsx)(q.a,{color:"secondary"}),Object(a.jsxs)(b.a,{component:Ct.a,p:2,children:[Object(a.jsxs)(j.a,{alignItems:"center",container:!0,justify:"space-between",children:[Object(a.jsx)(j.a,{item:!0,children:k.map((function(e){return e}))}),y&&Object(a.jsxs)(j.a,{item:!0,children:[Object(a.jsx)(D.a,{onClick:function(){x(w?"default":"editing")},size:"small",children:Object(a.jsx)(Nt.a,{fontSize:"small"})}),Object(a.jsx)(D.a,{onClick:function(){x("removing"),p(te(n))},size:"small",children:Object(a.jsx)(Rt.a,{fontSize:"small"})})]})]}),w?Object(a.jsx)(b.a,{mt:2,children:Object(a.jsx)(yt,{description:t,disabled:h,isPrivate:"private"===i,name:c,onSubmit:function(e){e.reset;var t=Object(ut.a)(e,["reset"]);p(ne(Object(F.a)(Object(F.a)({},t),{},{slug:n}))).then((function(){return x("default")}))}})}):Object(a.jsx)(Ft.a,{allowDangerousHtml:!0,children:zt.a.shortnameToImage(t)})]})]})},Ea=Object(z.a)((function(e){return{item:{transition:"0.25s"},root:{}}}));var Ma,Aa=function(e){var t=e.items,n=Ea(),c=Object(r.useRef)(),i=Object(r.useState)(0),s=Object(O.a)(i,2),o=s[0],u=s[1],l=Object(r.useState)(t.length-1),d=Object(O.a)(l,2),p=d[0],m=d[1];function h(){u(c.current.clientWidth)}function f(e){return function(){m(e)}}return Object(r.useEffect)((function(){return c.current&&(u(c.current.clientWidth),window.addEventListener("resize",h)),function(){return window.removeEventListener("resize",h)}}),[c]),Object(a.jsx)(j.a,{container:!0,direction:"row-reverse",onMouseLeave:function(){m(t.length-1)},ref:c,title:o,children:t.map((function(e,t){return Object(a.jsx)(b.a,{className:n.item,display:"inline-block",onMouseOver:f(t),overflow:"hidden",width:t===p?"52%":"12%",children:rt(e,b.a,{width:.52*o+"px"})},t)}))})},Ba=Object(g.a)((function(e){return e.users.lists}),(function(e){return e})),Da=Object(x.b)("users/lists/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i,s,o,u,l;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.limit,r=void 0===a?5:a,c=t.page,i=void 0===c?1:c,s=t.userSlug,o=n.rejectWithValue,e.prev=2,e.next=5,$.a.get("/trakt/users/".concat(s,"/lists"));case 5:return u=e.sent,e.next=8,Promise.all(u.data.map((function(e){return $.a.get("/trakt/users/".concat(s,"/lists/").concat(e.ids.slug,"/items?page=").concat(i,"&limit=").concat(r))})));case 8:return l=e.sent,e.abrupt("return",u.data.map((function(e,t){return Object(F.a)(Object(F.a)({},e),{},{items:tt(l[t].data)})})));case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return",o(e.t0.toString()));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}()),_a=Object(x.c)({extraReducers:(Ma={},Object(Q.a)(Ma,Da.fulfilled,(function(e,t){return t.payload})),Object(Q.a)(Ma,ee.fulfilled,(function(e,t){e.push(Object(F.a)(Object(F.a)({},t.payload),{},{items:[]}))})),Object(Q.a)(Ma,te.fulfilled,(function(e,t){var n=t.meta.arg,a=e.findIndex((function(e){return e.ids.slug===n}));e.splice(a,1)})),Object(Q.a)(Ma,ne.fulfilled,(function(e,t){var n=t.meta.arg.slug,a=e.findIndex((function(e){return e.ids.slug===n}));e[a]=Object(F.a)(Object(F.a)({},e[a]),t.payload)})),Ma),initialState:[],name:"users/lists",reducers:{}}).reducer;var qa=function(){var e=Object(l.j)().userSlug,t=Object(u.b)(),n=Object(u.c)(Ba);return Object(r.useEffect)((function(){t(Da({userSlug:e}))}),[t,e]),Object(a.jsxs)(b.a,{p:2,children:[!n.length&&"No lists found.",e===nt()&&Object(a.jsx)(b.a,{mb:2,textAlign:"right",children:Object(a.jsx)(A.a,{color:"secondary",component:d.b,to:"?addList",variant:"outlined",children:"Add list"})}),n.map((function(e){return Object(a.jsxs)(j.a,{container:!0,item:!0,spacing:2,children:[Object(a.jsx)(j.a,{item:!0,children:Object(a.jsx)(b.a,{width:368,children:Object(a.jsx)(Aa,{items:e.items.slice(0,5)})})}),Object(a.jsx)(j.a,{item:!0,xs:!0,children:Object(a.jsx)(Va,{description:e.description,listSlug:e.ids.slug,name:e.name,privacy:e.privacy,username:e.user.username,userSlug:e.user.ids.slug})})]},e.ids.slug)}))]})},Ga=Object(g.a)((function(e){return e.users.ratings.entities}),(function(e){return e})),Ua=Object(g.a)((function(e){return e.users.ratings.pagination.total}),(function(e){return e})),Ja=Object(x.b)("users/ratings/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i,s,o,u;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.limit,r=void 0===a?Ze:a,c=t.page,i=void 0===c?1:c,s=t.userSlug,o=n.rejectWithValue,e.prev=2,e.next=5,$.a.get("/trakt/users/".concat(s,"/ratings?page=").concat(i,"&limit=").concat(r));case 5:return u=e.sent,e.abrupt("return",{entities:tt(u.data),total:parseInt(u.headers["x-pagination-page-count"])});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",o(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()),Ka=Object(x.c)({extraReducers:Object(Q.a)({},Ja.fulfilled,(function(e,t){e.entities=t.payload.entities,e.pagination.total=t.payload.total})),initialState:{entities:[],pagination:{total:0}},name:"users/ratings",reducers:{}}).reducer;var Ha=function(){var e=Object(u.b)(),t=Object(l.j)().userSlug,n=Object(u.c)(Ga),c=en(Ua),i=c.hasNextPage,s=c.hasPreviousPage,o=c.page,d=c.pagesTotal,p=c.toFirstPage,h=c.toLastPage,f=c.toNextPage,O=c.toPreviousPage;return Object(r.useEffect)((function(){e(Ja({page:o,userSlug:t}))}),[e,o,t]),Object(a.jsxs)(b.a,{p:2,children:[!n.length&&"No ratings found.",Object(a.jsx)(j.a,{container:!0,spacing:1,children:n.map((function(e){return at({item:e,TileProps:{children:Object(a.jsxs)(m.a,{variant:"caption",children:["Rated ",e.rating," \u2764\ufe0f"]})},WrapperComponent:j.a,WrapperProps:{item:!0,xs:2}})}))}),d>1&&Object(a.jsx)(Qt,{hasNextPage:i,hasPreviousPage:s,onFirstPage:p,onLastPage:h,onNextPage:f,onPreviousPage:O,page:o,pagesTotal:d,variant:"wrapped"})]})},Ya=Object(g.a)((function(e){return e.users.recommendations.entities}),(function(e){return e})),Qa=Object(g.a)((function(e){return e.users.recommendations.pagination.total}),(function(e){return e})),Xa=Object(x.b)("users/recommendations/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i,s,o,u;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.limit,r=void 0===a?Ze:a,c=t.page,i=void 0===c?1:c,s=t.userSlug,o=n.rejectWithValue,e.prev=2,e.next=5,$.a.get("/trakt/users/".concat(s,"/recommendations?extended=full&page=").concat(i,"&limit=").concat(r));case 5:return u=e.sent,e.abrupt("return",{entities:u.data,total:parseInt(u.headers["x-pagination-page-count"])});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",o(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()),Za=Object(x.c)({extraReducers:Object(Q.a)({},Xa.fulfilled,(function(e,t){e.entities=t.payload.entities,e.pagination.total=t.payload.total})),initialState:{entities:[],pagination:{total:0}},name:"users/recommendations",reducers:{}}).reducer;var $a=function(){var e=Object(l.j)().userSlug,t=Object(u.b)(),n=Object(u.c)(Ya),c=en(Qa),i=c.hasNextPage,s=c.hasPreviousPage,o=c.page,d=c.pagesTotal,p=c.toFirstPage,m=c.toLastPage,h=c.toNextPage,f=c.toPreviousPage;return Object(r.useEffect)((function(){t(Xa({page:o,userSlug:e}))}),[t,o,e]),Object(a.jsxs)(b.a,{p:2,children:[!n.length&&"No ratings found.",Object(a.jsx)(j.a,{container:!0,spacing:1,children:n.map((function(e){return at({item:e,WrapperComponent:j.a,WrapperProps:{item:!0,xs:2}})}))}),d>1&&Object(a.jsx)(Qt,{hasNextPage:i,hasPreviousPage:s,onFirstPage:p,onLastPage:m,onNextPage:h,onPreviousPage:f,page:o,pagesTotal:d,variant:"wrapped"})]})},er=Object(x.b)("app/connections/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i,s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,Promise.all([$.a.get("/api/users/".concat(nt(),"/followers")),$.a.get("/api/users/".concat(nt(),"/following"))]);case 4:return r=e.sent,c=Object(O.a)(r,2),i=c[0],s=c[1],e.abrupt("return",{followers:i.data,following:s.data});case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",a(e.t0.toString()));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),tr=Object(x.c)({extraReducers:Object(Q.a)({},er.fulfilled,(function(e,t){return t.payload})),initialState:{followers:[],following:[]},name:"app/connections",reducers:{}}).reducer,nr=Object(x.b)("app/feed/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,$.a.get("/api/feed");case 4:return r=e.sent,c=r.data.map((function(e){var t=e.entity,n=e.slug;return $.a.get("/trakt/".concat(t,"/").concat(n))})),e.next=8,Promise.all(c);case 8:return i=e.sent,e.abrupt("return",i.map((function(e,t){var n=e.data,a=ct(r.data[t].entity);return Object(Q.a)({feed:r.data[t],type:a},a,n)})));case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",a(e.t0.toString()));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()),ar=Object(x.c)({extraReducers:Object(Q.a)({},nr.fulfilled,(function(e,t){return t.payload})),initialState:[],name:"app/feed",reducers:{}}).reducer,rr=Object(x.b)("actions/connections/follow",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,$.a.post("/api/users/".concat(t,"/follow"));case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",a(e.t0.toString()));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()),cr=Object(x.b)("actions/connections/unfollow",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,$.a.delete("/api/users/".concat(t,"/unfollow"));case 4:e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",a(e.t0.toString()));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}());function ir(){return Object(g.a)((function(e){return e.app.connections.following}),(function(e,t){return t}),(function(e,t){var n=e.find((function(e){return e.slug===t}));return Boolean(n)}))}var sr=[["Ratings","ratings"],["Recommendations","recommendations"],["Watchlist","watchlist"],["Lists","lists"],["Comments","comments"]];function or(){return(or=Object(X.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$.a.get("/api/users/".concat(t));case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var ur=function(){var e=Object(r.useMemo)(ir,[]),t=Object(l.j)().userSlug,n=Object(u.b)(),c=Object(r.useState)(!1),i=Object(O.a)(c,2),s=i[0],o=i[1],j=Object(u.c)((function(n){return e(n,t)})),p=t===nt();return Object(r.useEffect)((function(){(function(e){return or.apply(this,arguments)})(t).then(o)}),[n,t]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ct.a,{square:!0,children:Object(a.jsxs)(vn.a,{centered:!0,indicatorColor:"secondary",textColor:"secondary",value:!1,children:[p&&Object(a.jsx)(xn.a,{activeClassName:"Mui-selected",component:d.c,label:"Feed",to:"/app/users/".concat(t,"/feed")}),sr.map((function(e){var n=Object(O.a)(e,2),r=n[0],c=n[1];return Object(a.jsx)(xn.a,{activeClassName:"Mui-selected",component:d.c,label:r,to:"/app/users/".concat(t,"/").concat(c)},c)}))]})}),!p&&Object(a.jsx)(b.a,{p:2,textAlign:"right",children:Object(a.jsx)(B.a,{title:s?"Follow or unfollow":"This user is not traktor user",children:Object(a.jsx)("span",{children:Object(a.jsx)(A.a,{color:"secondary",disabled:!s,onClick:function(){var e;n(j?(e=t,function(){var t=Object(X.a)(Y.a.mark((function t(n){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(cr(e));case 2:return t.next=4,n(er());case 4:return t.next=6,n(nr());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):function(e){return function(){var t=Object(X.a)(Y.a.mark((function t(n){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(rr(e));case 2:return t.next=4,n(er());case 4:return t.next=6,n(nr());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},variant:j?"contained":"outlined",children:j?"Unfollow":"Follow"})})})}),Object(a.jsx)(l.b,{})]})},lr=Object(g.a)((function(e){return e.users.watchlist.entities}),(function(e){return e})),dr=Object(g.a)((function(e){return e.users.watchlist.pagination.total}),(function(e){return e})),jr=Object(x.b)("users/watchlist/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i,s,o,u;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.limit,r=void 0===a?Ze:a,c=t.page,i=void 0===c?1:c,s=t.userSlug,o=n.rejectWithValue,e.prev=2,e.next=5,$.a.get("/trakt/users/".concat(s,"/watchlist?extended=full&page=").concat(i,"&limit=").concat(r));case 5:return u=e.sent,e.abrupt("return",{entities:tt(u.data),total:parseInt(u.headers["x-pagination-page-count"])});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",o(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()),pr=Object(x.c)({extraReducers:Object(Q.a)({},jr.fulfilled,(function(e,t){e.entities=t.payload.entities,e.pagination.total=t.payload.total})),initialState:{entities:[],pagination:{total:0}},name:"users/watchlist",reducers:{}}).reducer;var br=function(){var e=Object(l.j)().userSlug,t=Object(u.b)(),n=Object(u.c)(lr),c=en(dr),i=c.hasNextPage,s=c.hasPreviousPage,o=c.page,d=c.pagesTotal,p=c.toFirstPage,m=c.toLastPage,h=c.toNextPage,f=c.toPreviousPage;return Object(r.useEffect)((function(){t(jr({page:o,userSlug:e}))}),[t,o,e]),Object(a.jsxs)(b.a,{p:2,children:[!n.length&&"No items in watchlist found.",Object(a.jsx)(j.a,{container:!0,spacing:1,children:n.map((function(e){return at({item:e,WrapperComponent:j.a,WrapperProps:{item:!0,xs:2}})}))}),d>1&&Object(a.jsx)(Qt,{hasNextPage:i,hasPreviousPage:s,onFirstPage:p,onLastPage:m,onNextPage:h,onPreviousPage:f,page:o,pagesTotal:d,variant:"wrapped"})]})},mr=n(32),hr=Object(mr.c)({connections:tr,feed:ar,lists:re,ratings:qe,recommendations:ge,watchlist:Ce});function fr(e){return["/pending","/fulfilled","/rejected"].some((function(t){return e.type.endsWith(t)}))}var Or=Object(x.c)({extraReducers:function(e){e.addMatcher(fr,(function(e,t){var n=t.type.split("/"),a=n.pop();e["".concat(n.join("/"))]="pending"===a}))},initialState:{},name:"loading",reducers:{}}).reducer,gr=Object(x.b)("users/connections/fetch",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c,i,s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,Promise.all([$.a.get("/api/users/".concat(t,"/followers")),$.a.get("/api/users/".concat(t,"/following"))]);case 4:return r=e.sent,c=Object(O.a)(r,2),i=c[0],s=c[1],e.abrupt("return",{followers:i.data,following:s.data});case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",a(e.t0.toString()));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),vr=Object(x.c)({extraReducers:Object(Q.a)({},gr.fulfilled,(function(e,t){return t.payload})),initialState:{followers:[],following:[]},name:"users/connections",reducers:{}}).reducer,xr=Object(mr.c)({comments:Pa,connections:vr,list:Fa,lists:_a,ratings:Ka,recommendations:Za,watchlist:pr}),yr=Object(x.a)({reducer:{app:hr,comments:un,loading:Or,movie:rn,movies:Qn,notifications:C,person:ta,search:ua,show:sn,shows:fa,users:xr}});function wr(){It();var e=Object(r.useMemo)(pe,[]),t=Object(u.c)((function(t){return e(t,["comments/fetch","movie/fetch","movies/fetch","person/fetch","search/fetch","show/fetch","shows/fetch","users/comments/fetch","users/list/fetch","users/list/items/fetch","users/lists/fetch","users/ratings/fetch","users/recommendations/fetch","users/watchlist/fetch"])}));return Object(a.jsxs)(a.Fragment,{children:[t&&Object(a.jsx)(kt,{}),Object(a.jsx)(wt,{}),Object(a.jsxs)(l.e,{basename:"/app",children:[Object(a.jsx)(l.c,{element:Object(a.jsx)(l.a,{replace:!0,to:"movies/trending"}),path:"/"}),Object(a.jsxs)(l.c,{element:Object(a.jsx)(ht,{}),path:"/",children:[Object(a.jsxs)(l.c,{path:"movies",children:[Object(a.jsx)(l.c,{element:Object(a.jsx)(l.a,{replace:!0,to:"trending"}),path:"/"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Zn,{category:"trending"}),path:"trending"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Zn,{category:"popular"}),path:"popular"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Zn,{category:"recommended"}),path:"recommended"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Zn,{category:"watched"}),path:"watched"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Zn,{category:"anticipated"}),path:"anticipated"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Jn,{}),path:":slug"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(bn,{entity:"movies"}),path:":slug/comments"})]}),Object(a.jsxs)(l.c,{path:"shows",children:[Object(a.jsx)(l.c,{element:Object(a.jsx)(l.a,{replace:!0,to:"trending"}),path:"/"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(va,{category:"trending"}),path:"trending"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(va,{category:"popular"}),path:"popular"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(va,{category:"recommended"}),path:"recommended"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(va,{category:"watched"}),path:"watched"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(va,{category:"anticipated"}),path:"anticipated"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(pa,{}),path:":slug"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(bn,{entity:"shows"}),path:":slug/comments"})]}),Object(a.jsx)(l.c,{element:Object(a.jsx)(ca,{}),path:"people/:slug"}),Object(a.jsxs)(l.c,{path:"search",children:[Object(a.jsx)(l.c,{element:Object(a.jsx)(l.a,{replace:!0,to:"all"}),path:"/"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(la,{entity:"all"}),path:"all"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(la,{entity:"movies"}),path:"movies"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(la,{entity:"shows"}),path:"shows"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(la,{entity:"people"}),path:"people"})]}),Object(a.jsxs)(l.c,{element:Object(a.jsx)(ur,{}),path:"users/:userSlug",children:[Object(a.jsx)(l.c,{element:Object(a.jsx)(l.a,{replace:!0,to:"ratings"}),path:"/"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Na,{}),path:"feed"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Ha,{}),path:"ratings"}),Object(a.jsx)(l.c,{element:Object(a.jsx)($a,{}),path:"recommendations"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(br,{}),path:"watchlist"}),Object(a.jsxs)(l.c,{path:"lists",children:[Object(a.jsx)(l.c,{element:Object(a.jsx)(qa,{}),path:"/"}),Object(a.jsx)(l.c,{element:Object(a.jsx)(Ta,{}),path:":id"})]}),Object(a.jsx)(l.c,{element:Object(a.jsx)(ka,{}),path:"comments"})]}),Object(a.jsx)(l.c,{path:"games",children:Object(a.jsx)(l.c,{element:Object(a.jsx)(qn,{}),path:"lets-pick"})})]}),Object(a.jsx)(l.c,{element:Object(a.jsx)(St,{}),path:"*"})]})]})}var Pr=function(){return Object(a.jsx)(u.a,{store:yr,children:Object(a.jsxs)(d.a,{children:[Object(a.jsx)(o.a,{}),Object(a.jsx)(wr,{})]})})};var kr=function(){return function(){var e=Object(X.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t(nr()),t(er()),t(ae()),t(_e()),t(Oe()),t(Ie())]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};(0,yr.dispatch)(kr()).then((function(){s.a.render(Object(a.jsx)(Pr,{}),document.getElementById("root"))}))}},[[318,1,2]]]);
//# sourceMappingURL=main.a52c906d.chunk.js.map